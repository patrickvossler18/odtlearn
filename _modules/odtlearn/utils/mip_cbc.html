<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" />

    <meta name="generator" content="sphinx-4.4.0, furo 2022.03.04"/>
        <title>odtlearn.utils.mip_cbc - odtlearn 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=935aa2abcc5c1da4283d1dc201fb1f0add16d23a" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=25ceb02ed1c46dc30f2321ff83e92799f69dfdb9" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">odtlearn 1.0.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  
  <span class="sidebar-brand-text">odtlearn 1.0.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation Guide</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../user_guide/index.html">User Guide</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/optimal_classification_trees.html">Optimal Classification Trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/fair_optimal_classification_trees.html">Fair Optimal Classification Trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/optimal_robust_classification_trees.html">Robust Optimal Classification Trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/optimal_prescriptive_trees.html">Optimal Prescriptive Trees</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../api.html">ODTlearn API</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../autoapi/odtlearn/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../autoapi/odtlearn/utils/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.utils</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/odtlearn/utils/Tree/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.utils.Tree</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/odtlearn/utils/TreePlotter/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.utils.TreePlotter</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/odtlearn/utils/binarize/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.utils.binarize</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/odtlearn/utils/callback_helpers/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.utils.callback_helpers</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/odtlearn/utils/callbacks/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.utils.callbacks</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/odtlearn/utils/cbc_solver/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.utils.cbc_solver</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/odtlearn/utils/gb_solver/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.utils.gb_solver</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/odtlearn/utils/scip_solver/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.utils.scip_solver</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/odtlearn/utils/solver/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.utils.solver</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/odtlearn/utils/validation/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.utils.validation</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/odtlearn/constants/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.constants</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/odtlearn/datasets/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.datasets</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/odtlearn/fair_oct/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.fair_oct</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/odtlearn/flow_oct/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.flow_oct</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/odtlearn/flow_oct_ms/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.flow_oct_ms</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/odtlearn/flow_oct_ss/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.flow_oct_ss</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/odtlearn/flow_opt/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.flow_opt</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/odtlearn/flow_opt_ms/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.flow_opt_ms</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/odtlearn/flow_opt_ss/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.flow_opt_ss</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/odtlearn/opt_ct/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.opt_ct</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/odtlearn/opt_dt/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.opt_dt</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/odtlearn/opt_pt/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.opt_pt</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/odtlearn/robust_oct/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">odtlearn.robust_oct</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example Notebooks</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../notebooks/index.html">Example Notebooks</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../notebooks/FlowOCT.html"><code class="docutils literal notranslate"><span class="pre">FlowOCT</span></code> Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../notebooks/FairOCT.html"><code class="docutils literal notranslate"><span class="pre">FairOCT</span></code> Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../notebooks/RobustOCT.html"><code class="docutils literal notranslate"><span class="pre">RobustTreeClassifier</span></code> Examples</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing.html">How to contribute to ODTlearn</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <h1>Source code for odtlearn.utils.mip_cbc</h1><div class="highlight"><pre>
<span></span><span class="sd">"""Python-MIP interface to the COIN-OR Branch-and-Cut solver CBC"""</span>
<span class="c1"># Modified version of the cbc.py file from the python-mip</span>
<span class="c1"># https://github.com/coin-or/python-mip/blob/master/mip/cbc.py</span>
<span class="c1"># Original Authors: Python-MIP Team</span>
<span class="c1"># Original License: EPL v 2.0 (License text available at https://github.com/coin-or/python-mip/blob/master/LICENSE)</span>
<span class="c1"># Modified by: Patrick Vossler (patrick.vossler18@gmail.com)</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">multiprocessing</span> <span class="k">as</span> <span class="nn">multip</span>
<span class="kn">import</span> <span class="nn">numbers</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">dirname</span><span class="p">,</span> <span class="n">exists</span><span class="p">,</span> <span class="n">isfile</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">maxsize</span><span class="p">,</span> <span class="n">platform</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">import</span> <span class="nn">mip</span>
<span class="kn">from</span> <span class="nn">cffi</span> <span class="kn">import</span> <span class="n">FFI</span>
<span class="kn">from</span> <span class="nn">mip</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BINARY</span><span class="p">,</span>
    <span class="n">CONTINUOUS</span><span class="p">,</span>
    <span class="n">EQUAL</span><span class="p">,</span>
    <span class="n">GREATER_OR_EQUAL</span><span class="p">,</span>
    <span class="n">INTEGER</span><span class="p">,</span>
    <span class="n">LESS_OR_EQUAL</span><span class="p">,</span>
    <span class="n">MAXIMIZE</span><span class="p">,</span>
    <span class="n">MINIMIZE</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">,</span>
    <span class="n">Constr</span><span class="p">,</span>
    <span class="n">CutPool</span><span class="p">,</span>
    <span class="n">CutType</span><span class="p">,</span>
    <span class="n">LinExpr</span><span class="p">,</span>
    <span class="n">LP_Method</span><span class="p">,</span>
    <span class="n">Model</span><span class="p">,</span>
    <span class="n">OptimizationStatus</span><span class="p">,</span>
    <span class="n">SearchEmphasis</span><span class="p">,</span>
    <span class="n">Solver</span><span class="p">,</span>
    <span class="n">Var</span><span class="p">,</span>
    <span class="n">VConstrList</span><span class="p">,</span>
    <span class="n">VVarList</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">mip.exceptions</span> <span class="kn">import</span> <span class="n">InvalidParameter</span><span class="p">,</span> <span class="n">MipBaseException</span><span class="p">,</span> <span class="n">ParameterNotAvailable</span>
<span class="kn">from</span> <span class="nn">mip.lists</span> <span class="kn">import</span> <span class="n">EmptyRowSol</span><span class="p">,</span> <span class="n">EmptyVarSol</span>
<span class="kn">from</span> <span class="nn">mip.model</span> <span class="kn">import</span> <span class="n">xsum</span>

<div class="viewcode-block" id="logger"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.logger">[docs]</a><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span></div>
<div class="viewcode-block" id="warningMessages"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.warningMessages">[docs]</a><span class="n">warningMessages</span> <span class="o">=</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="ffi"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.ffi">[docs]</a><span class="n">ffi</span> <span class="o">=</span> <span class="n">FFI</span><span class="p">()</span></div>
<div class="viewcode-block" id="has_cbc"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.has_cbc">[docs]</a><span class="n">has_cbc</span> <span class="o">=</span> <span class="kc">False</span></div>
<div class="viewcode-block" id="os_is_64_bit"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.os_is_64_bit">[docs]</a><span class="n">os_is_64_bit</span> <span class="o">=</span> <span class="n">maxsize</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="o">**</span><span class="mi">32</span></div>
<div class="viewcode-block" id="INF"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INF">[docs]</a><span class="n">INF</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">"inf"</span><span class="p">)</span></div>
<div class="viewcode-block" id="cut_idx"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.cut_idx">[docs]</a><span class="n">cut_idx</span> <span class="o">=</span> <span class="mi">0</span></div>

<span class="c1"># for variables and rows</span>
<div class="viewcode-block" id="MAX_NAME_SIZE"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.MAX_NAME_SIZE">[docs]</a><span class="n">MAX_NAME_SIZE</span> <span class="o">=</span> <span class="mi">512</span></div>

<div class="viewcode-block" id="DEF_PUMPP"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.DEF_PUMPP">[docs]</a><span class="n">DEF_PUMPP</span> <span class="o">=</span> <span class="mi">30</span></div>

<span class="k">try</span><span class="p">:</span>
<div class="viewcode-block" id="pathmip"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.pathmip">[docs]</a>    <span class="n">pathmip</span> <span class="o">=</span> <span class="n">dirname</span><span class="p">(</span><span class="n">mip</span><span class="o">.</span><span class="vm">__file__</span><span class="p">)</span></div>
    <span class="n">pathlib</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pathmip</span><span class="p">,</span> <span class="s2">"libraries"</span><span class="p">)</span>
    <span class="n">libfile</span> <span class="o">=</span> <span class="s2">""</span>
    <span class="c1"># if user wants to force the loading of an specific CBC library</span>
    <span class="c1"># (for debugging purposes, for example)</span>
    <span class="k">if</span> <span class="s2">"PMIP_CBC_LIBRARY"</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
        <span class="n">libfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">"PMIP_CBC_LIBRARY"</span><span class="p">]</span>
        <span class="n">pathlib</span> <span class="o">=</span> <span class="n">dirname</span><span class="p">(</span><span class="n">libfile</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"win"</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">pathlib</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">"PATH"</span><span class="p">]:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">"PATH"</span><span class="p">]</span> <span class="o">+=</span> <span class="s2">";"</span> <span class="o">+</span> <span class="n">pathlib</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">"linux"</span> <span class="ow">in</span> <span class="n">platform</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">os_is_64_bit</span><span class="p">:</span>
                <span class="n">pathlibe</span> <span class="o">=</span> <span class="n">pathlib</span>
                <span class="n">libfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pathlib</span><span class="p">,</span> <span class="s2">"cbc-c-linux-x86-64.so"</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">exists</span><span class="p">(</span><span class="n">libfile</span><span class="p">):</span>
                    <span class="n">pathlibe</span> <span class="o">=</span> <span class="n">pathlib</span>
                    <span class="n">libfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pathlib</span><span class="p">,</span> <span class="s2">"cbc-c-linux-x86-64.so"</span><span class="p">)</span>
                <span class="n">pathlib</span> <span class="o">=</span> <span class="n">pathlibe</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Linux 32 bits platform not supported."</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">platform</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"win"</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">os_is_64_bit</span><span class="p">:</span>
                <span class="n">pathlibe</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pathlib</span><span class="p">,</span> <span class="s2">"win64"</span><span class="p">)</span>
                <span class="n">libfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pathlibe</span><span class="p">,</span> <span class="s2">"cbc-c-windows-x86-64.dll"</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">exists</span><span class="p">(</span><span class="n">libfile</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">pathlibe</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">"PATH"</span><span class="p">]:</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">"PATH"</span><span class="p">]</span> <span class="o">=</span> <span class="n">pathlibe</span> <span class="o">+</span> <span class="s2">";"</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">"PATH"</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pathlibe</span> <span class="o">=</span> <span class="n">pathlib</span>
                    <span class="n">libfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pathlibe</span><span class="p">,</span> <span class="s2">"cbc-c-windows-x86-64.dll"</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">pathlibe</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">"PATH"</span><span class="p">]:</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">"PATH"</span><span class="p">]</span> <span class="o">=</span> <span class="n">pathlibe</span> <span class="o">+</span> <span class="s2">";"</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">"PATH"</span><span class="p">]</span>
                <span class="n">pathlib</span> <span class="o">=</span> <span class="n">pathlibe</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Win32 platform not supported."</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">platform</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"darwin"</span><span class="p">)</span> <span class="ow">or</span> <span class="n">platform</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span>
            <span class="s2">"macos"</span>
        <span class="p">):</span>
            <span class="k">if</span> <span class="n">os_is_64_bit</span><span class="p">:</span>
                <span class="n">libfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pathlib</span><span class="p">,</span> <span class="s2">"cbc-c-darwin-x86-64.dylib"</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">libfile</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"You operating system/platform is not supported"</span><span class="p">)</span>
    <span class="n">old_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">pathlib</span><span class="p">)</span>
    <span class="n">cbclib</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">dlopen</span><span class="p">(</span><span class="n">libfile</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">old_dir</span><span class="p">)</span>
    <span class="n">has_cbc</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">"An error occurred while loading the CBC library:</span><span class="se">\t</span><span class="s2"> "</span> <span class="s2">"</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
    <span class="n">has_cbc</span> <span class="o">=</span> <span class="kc">False</span>

<span class="k">if</span> <span class="n">has_cbc</span><span class="p">:</span>
    <span class="n">ffi</span><span class="o">.</span><span class="n">cdef</span><span class="p">(</span>
        <span class="sd">"""</span>
<span class="sd">    typedef int(*cbc_progress_callback)(void *model,</span>
<span class="sd">                                        int phase,</span>
<span class="sd">                                        int step,</span>
<span class="sd">                                        const char *phaseName,</span>
<span class="sd">                                        double seconds,</span>
<span class="sd">                                        double lb,</span>
<span class="sd">                                        double ub,</span>
<span class="sd">                                        int nint,</span>
<span class="sd">                                        int *vecint,</span>
<span class="sd">                                        void *cbData</span>
<span class="sd">                                        );</span>

<span class="sd">    typedef void(*cbc_callback)(void *model, int msgno, int ndouble,</span>
<span class="sd">        const double *dvec, int nint, const int *ivec,</span>
<span class="sd">        int nchar, char **cvec);</span>

<span class="sd">    typedef void(*cbc_cut_callback)(void *osiSolver, void *osiCuts, void *appdata, int level, int npass);</span>

<span class="sd">    typedef int (*cbc_incumbent_callback)(void *cbcModel,</span>
<span class="sd">        double obj, int nz,</span>
<span class="sd">        char **vnames, double *x, void *appData);</span>

<span class="sd">    typedef void Cbc_Model;</span>

<span class="sd">    void *Cbc_newModel();</span>

<span class="sd">    void Cbc_readLp(Cbc_Model *model, const char *file);</span>

<span class="sd">    int Cbc_readBasis(Cbc_Model *model, const char *filename);</span>

<span class="sd">    int Cbc_writeBasis(Cbc_Model *model, const char *filename, char</span>
<span class="sd">        writeValues, int formatType);</span>

<span class="sd">    void Cbc_readMps(Cbc_Model *model, const char *file);</span>

<span class="sd">    char Cbc_supportsGzip();</span>

<span class="sd">    char Cbc_supportsBzip2();</span>

<span class="sd">    void Cbc_writeLp(Cbc_Model *model, const char *file);</span>

<span class="sd">    void Cbc_writeMps(Cbc_Model *model, const char *file);</span>

<span class="sd">    int Cbc_getNumCols(Cbc_Model *model);</span>

<span class="sd">    int Cbc_getNumRows(Cbc_Model *model);</span>

<span class="sd">    int Cbc_getNumIntegers(Cbc_Model *model);</span>

<span class="sd">    int Cbc_getNumElements(Cbc_Model *model);</span>

<span class="sd">    int Cbc_getRowNz(Cbc_Model *model, int row);</span>

<span class="sd">    int *Cbc_getRowIndices(Cbc_Model *model, int row);</span>

<span class="sd">    double *Cbc_getRowCoeffs(Cbc_Model *model, int row);</span>

<span class="sd">    double Cbc_getRowRHS(Cbc_Model *model, int row);</span>

<span class="sd">    void Cbc_setRowRHS(Cbc_Model *model, int row, double rhs);</span>

<span class="sd">    char Cbc_getRowSense(Cbc_Model *model, int row);</span>

<span class="sd">    const double *Cbc_getRowActivity(Cbc_Model *model);</span>

<span class="sd">    const double *Cbc_getRowSlack(Cbc_Model *model);</span>

<span class="sd">    int Cbc_getColNz(Cbc_Model *model, int col);</span>

<span class="sd">    int *Cbc_getColIndices(Cbc_Model *model, int col);</span>

<span class="sd">    double *Cbc_getColCoeffs(Cbc_Model *model, int col);</span>

<span class="sd">    void Cbc_addCol(Cbc_Model *model, const char *name,</span>
<span class="sd">        double lb, double ub, double obj, char isInteger,</span>
<span class="sd">        int nz, int *rows, double *coefs);</span>

<span class="sd">    void Cbc_addRow(Cbc_Model *model, const char *name, int nz,</span>
<span class="sd">        const int *cols, const double *coefs, char sense, double rhs);</span>

<span class="sd">    void Cbc_addLazyConstraint(Cbc_Model *model, int nz,</span>
<span class="sd">        int *cols, double *coefs, char sense, double rhs);</span>

<span class="sd">    void Cbc_addSOS(Cbc_Model *model, int numRows, const int *rowStarts,</span>
<span class="sd">        const int *colIndices, const double *weights, const int type);</span>

<span class="sd">    int Cbc_numberSOS(Cbc_Model *model);</span>

<span class="sd">    void Cbc_setObjCoeff(Cbc_Model *model, int index, double value);</span>

<span class="sd">    double Cbc_getObjSense(Cbc_Model *model);</span>

<span class="sd">    const double *Cbc_getObjCoefficients(Cbc_Model *model);</span>

<span class="sd">    const double *Cbc_getColSolution(Cbc_Model *model);</span>

<span class="sd">    const double *Cbc_getReducedCost(Cbc_Model *model);</span>

<span class="sd">    double *Cbc_bestSolution(Cbc_Model *model);</span>

<span class="sd">    int Cbc_numberSavedSolutions(Cbc_Model *model);</span>

<span class="sd">    const double *Cbc_savedSolution(Cbc_Model *model, int whichSol);</span>

<span class="sd">    double Cbc_savedSolutionObj(Cbc_Model *model, int whichSol);</span>

<span class="sd">    double Cbc_getObjValue(Cbc_Model *model);</span>

<span class="sd">    void Cbc_setObjSense(Cbc_Model *model, double sense);</span>

<span class="sd">    int Cbc_isProvenOptimal(Cbc_Model *model);</span>

<span class="sd">    int Cbc_isProvenInfeasible(Cbc_Model *model);</span>

<span class="sd">    int Cbc_isContinuousUnbounded(Cbc_Model *model);</span>

<span class="sd">    int Cbc_isAbandoned(Cbc_Model *model);</span>

<span class="sd">    const double *Cbc_getColLower(Cbc_Model *model);</span>

<span class="sd">    const double *Cbc_getColUpper(Cbc_Model *model);</span>

<span class="sd">    double Cbc_getColObj(Cbc_Model *model, int colIdx);</span>

<span class="sd">    double Cbc_getColLB(Cbc_Model *model, int colIdx);</span>

<span class="sd">    double Cbc_getColUB(Cbc_Model *model, int colIdx);</span>

<span class="sd">    void Cbc_setColLower(Cbc_Model *model, int index, double value);</span>

<span class="sd">    void Cbc_setColUpper(Cbc_Model *model, int index, double value);</span>

<span class="sd">    int Cbc_isInteger(Cbc_Model *model, int i);</span>

<span class="sd">    void Cbc_getColName(Cbc_Model *model,</span>
<span class="sd">        int iColumn, char *name, size_t maxLength);</span>

<span class="sd">    void Cbc_getRowName(Cbc_Model *model,</span>
<span class="sd">        int iRow, char *name, size_t maxLength);</span>

<span class="sd">    void Cbc_setContinuous(Cbc_Model *model, int iColumn);</span>

<span class="sd">    void Cbc_setInteger(Cbc_Model *model, int iColumn);</span>

<span class="sd">    /*! Integer parameters */</span>
<span class="sd">    enum IntParam {</span>
<span class="sd">      INT_PARAM_PERT_VALUE              = 0,  /*! Method of perturbation, -5000 to 102, default 50 */</span>
<span class="sd">      INT_PARAM_IDIOT                   = 1,  /*! Parameter of the "idiot" method to try to produce an initial feasible basis. -1 let the solver decide if this should be applied; 0 deactivates it and &gt;0 sets number of passes. */</span>
<span class="sd">      INT_PARAM_STRONG_BRANCHING        = 2,  /*! Number of variables to be evaluated in strong branching. */</span>
<span class="sd">      INT_PARAM_CUT_DEPTH               = 3,  /*! Sets the application of cuts to every depth multiple of this value. -1, the default value, let the solve decide. */</span>
<span class="sd">      INT_PARAM_MAX_NODES               = 4,  /*! Maximum number of nodes to be explored in the search tree */</span>
<span class="sd">      INT_PARAM_NUMBER_BEFORE           = 5,  /*! Number of branches before trusting pseudocodes computed in strong branching. */</span>
<span class="sd">      INT_PARAM_FPUMP_ITS               = 6,  /*! Maximum number of iterations in the feasibility pump method. */</span>
<span class="sd">      INT_PARAM_MAX_SOLS                = 7,  /*! Maximum number of solutions generated during the search. Stops the search when this number of solutions is found. */</span>
<span class="sd">      INT_PARAM_CUT_PASS_IN_TREE        = 8,  /*! Maximum number of cuts passes in the search tree (with the exception of the root node). Default 1. */</span>
<span class="sd">      INT_PARAM_THREADS                 = 9,  /*! Number of threads that can be used in the branch-and-bound method.*/</span>
<span class="sd">      INT_PARAM_CUT_PASS                = 10, /*! Number of cut passes in the root node. Default -1, solver decides */</span>
<span class="sd">      INT_PARAM_LOG_LEVEL               = 11, /*! Verbosity level, from 0 to 2 */</span>
<span class="sd">      INT_PARAM_MAX_SAVED_SOLS          = 12, /*! Size of the pool to save the best solutions found during the search. */</span>
<span class="sd">      INT_PARAM_MULTIPLE_ROOTS          = 13, /*! Multiple root passes to get additional cuts and solutions. */</span>
<span class="sd">      INT_PARAM_ROUND_INT_VARS          = 14, /*! If integer variables should be round to remove small infeasibilities. This can increase the overall amount of infeasibilities in problems with both continuous and integer variables */</span>
<span class="sd">      INT_PARAM_RANDOM_SEED             = 15, /*! When solving LP and MIP, randomization is used to break ties in some decisions. This changes the random seed so that multiple executions can produce different results */</span>
<span class="sd">      INT_PARAM_ELAPSED_TIME            = 16, /*! When =1 use elapsed (wallclock) time, otherwise use CPU time */</span>
<span class="sd">      INT_PARAM_CGRAPH                  = 17, /*! Conflict graph: controls if the conflict graph is created or not. 0: off, 1: auto, 2: on 3: fast weaker clique sep */</span>
<span class="sd">      INT_PARAM_CLIQUE_MERGING          = 18, /*! Clique merging options: 0: off , 1 auto , 2 before solving LP, 3 after solving LP and pre-processing */</span>
<span class="sd">      INT_PARAM_MAX_NODES_NOT_IMPROV_FS = 19, /*! Maximum number of nodes processed without improving best solution, after a feasible solution is found */</span>
<span class="sd">    };</span>
<span class="sd">    #define N_INT_PARAMS 20</span>

<span class="sd">    void Cbc_setIntParam(Cbc_Model *model, enum IntParam which, const int val);</span>

<span class="sd">    /*! Double parameters</span>
<span class="sd">     * */</span>
<span class="sd">    enum DblParam {</span>
<span class="sd">      DBL_PARAM_PRIMAL_TOL              = 0,  /*! Tollerance to consider a solution feasible in the linear programming solver. */</span>
<span class="sd">      DBL_PARAM_DUAL_TOL                = 1,  /*! Tollerance for a solution to be considered optimal in the linear programming solver. */</span>
<span class="sd">      DBL_PARAM_ZERO_TOL                = 2,  /*! Coefficients less that this value will be ignored when reading instances */</span>
<span class="sd">      DBL_PARAM_INT_TOL                 = 3,  /*! Maximum allowed distance from integer value for a variable to be considered integral */</span>
<span class="sd">      DBL_PARAM_PRESOLVE_TOL            = 4,  /*! Tollerance used in the presolver, should be increased if the pre-solver is declaring infeasible a feasible problem */</span>
<span class="sd">      DBL_PARAM_TIME_LIMIT              = 5,  /*! Time limit in seconds */</span>
<span class="sd">      DBL_PARAM_PSI                     = 6,  /*! Two dimensional princing factor in the Positive Edge pivot strategy. */</span>
<span class="sd">      DBL_PARAM_CUTOFF                  = 7,  /*! Only search for solutions with cost less-or-equal to this value. */</span>
<span class="sd">      DBL_PARAM_ALLOWABLE_GAP           = 8,  /*! Allowable gap between the lower and upper bound to conclude the search */</span>
<span class="sd">      DBL_PARAM_GAP_RATIO               = 9,   /*! Stops the search when the difference between the upper and lower bound is less than this fraction of the larger value */</span>
<span class="sd">      DBL_PARAM_MAX_SECS_NOT_IMPROV_FS  = 10, /*! Maximum processing time without improving best solution, after a feasible solution is found */</span>
<span class="sd">    };</span>
<span class="sd">    #define N_DBL_PARAMS 11</span>

<span class="sd">    void Cbc_setDblParam(Cbc_Model *model, enum DblParam which, const double val);</span>

<span class="sd">    void Cbc_setParameter(Cbc_Model *model, const char *name,</span>
<span class="sd">        const char *value);</span>

<span class="sd">    double Cbc_getCutoff(Cbc_Model *model);</span>

<span class="sd">    void Cbc_setCutoff(Cbc_Model *model, double cutoff);</span>

<span class="sd">    double Cbc_getAllowableGap(Cbc_Model *model);</span>

<span class="sd">    void Cbc_setAllowableGap(Cbc_Model *model, double allowedGap);</span>

<span class="sd">    double Cbc_getAllowableFractionGap(Cbc_Model *model);</span>

<span class="sd">    void Cbc_setAllowableFractionGap(Cbc_Model *model,</span>
<span class="sd">        double allowedFracionGap);</span>

<span class="sd">    double Cbc_getAllowablePercentageGap(Cbc_Model *model);</span>

<span class="sd">    void Cbc_setAllowablePercentageGap(Cbc_Model *model,</span>
<span class="sd">        double allowedPercentageGap);</span>

<span class="sd">    double Cbc_getMaximumSeconds(Cbc_Model *model);</span>

<span class="sd">    void Cbc_setMaximumSeconds(Cbc_Model *model, double maxSeconds);</span>

<span class="sd">    int Cbc_getMaximumNodes(Cbc_Model *model);</span>

<span class="sd">    void Cbc_setMaximumNodes(Cbc_Model *model, int maxNodes);</span>

<span class="sd">    int Cbc_getMaximumSolutions(Cbc_Model *model);</span>

<span class="sd">    void Cbc_setMaximumSolutions(Cbc_Model *model, int maxSolutions);</span>

<span class="sd">    int Cbc_getLogLevel(Cbc_Model *model);</span>

<span class="sd">    void Cbc_setLogLevel(Cbc_Model *model, int logLevel);</span>

<span class="sd">    double Cbc_getBestPossibleObjValue(Cbc_Model *model);</span>

<span class="sd">    void Cbc_setMIPStart(Cbc_Model *model, int count,</span>
<span class="sd">        const char **colNames, const double colValues[]);</span>

<span class="sd">    void Cbc_setMIPStartI(Cbc_Model *model, int count, const int colIdxs[],</span>
<span class="sd">        const double colValues[]);</span>

<span class="sd">    enum LPMethod {</span>
<span class="sd">      LPM_Auto           = 0,  /*! Solver will decide automatically which method to use */</span>
<span class="sd">      LPM_Dual           = 1,  /*! Dual simplex */</span>
<span class="sd">      LPM_Primal         = 2,  /*! Primal simplex */</span>
<span class="sd">      LPM_Barrier        = 3,  /*! The barrier algorithm */</span>
<span class="sd">      LPM_BarrierNoCross = 4   /*! Barrier algorithm, not to be followed by crossover */</span>
<span class="sd">    };</span>

<span class="sd">    void</span>
<span class="sd">    Cbc_setLPmethod(Cbc_Model *model, enum LPMethod lpm );</span>

<span class="sd">    void Cbc_updateConflictGraph( Cbc_Model *model );</span>

<span class="sd">    const void *Cbc_conflictGraph( Cbc_Model *model );</span>

<span class="sd">    int Cbc_solve(Cbc_Model *model);</span>

<span class="sd">    int Cbc_solveLinearProgram(Cbc_Model *model);</span>

<span class="sd">    /*! Type of cutting plane */</span>
<span class="sd">    enum CutType {</span>
<span class="sd">      CT_Probing          =  0,  /*! Cuts generated evaluating the impact of fixing bounds for integer variables */</span>
<span class="sd">      CT_Gomory           =  1,  /*! Gomory cuts obtained from the tableau, implemented by John Forrest  */</span>
<span class="sd">      CT_GMI              =  2,  /*! Gomory cuts obtained from the tableau, implementation from Giacomo Nannicini focusing on safer cuts */</span>
<span class="sd">      CT_LaGomory         =  3,  /*! Additional gomory cuts, simplification of 'A Relax-and-Cut Framework for Gomory's Mixed-Integer Cuts' by Matteo Fischetti &amp; Domenico Salvagnin */</span>
<span class="sd">      CT_RedSplit         =  4,  /*! Reduce and split cuts, implemented by Francois Margot */</span>
<span class="sd">      CT_RedSplitG        =  5,  /*! Reduce and split cuts, implemented by Giacomo Nannicini */</span>
<span class="sd">      CT_FlowCover        =  6,  /*! Flow cover cuts */</span>
<span class="sd">      CT_MIR              =  7,  /*! Mixed-integer rounding cuts */</span>
<span class="sd">      CT_TwoMIR           =  8,  /*! Two-phase Mixed-integer rounding cuts */</span>
<span class="sd">      CT_LaTwoMIR         =  9,  /*! Lagrangean relaxation for two-phase Mixed-integer rounding cuts, as in CT_LaGomory */</span>
<span class="sd">      CT_LiftAndProject   = 10,  /*! Lift and project cuts */</span>
<span class="sd">      CT_ResidualCapacity = 11,  /*! Residual capacity cuts */</span>
<span class="sd">      CT_ZeroHalf         = 12,  /*! Zero-half cuts */</span>
<span class="sd">      CT_Clique           = 13,  /*! Clique cuts */</span>
<span class="sd">      CT_OddWheel         = 14,  /*! Lifted odd-hole inequalities */</span>
<span class="sd">      CT_KnapsackCover    = 15,  /*! Knapsack cover cuts */</span>
<span class="sd">    };</span>

<span class="sd">    void Cbc_generateCuts( Cbc_Model *cbcModel, enum CutType ct, void *oc, int depth, int pass );</span>

<span class="sd">    void Cbc_strengthenPacking(Cbc_Model *model);</span>

<span class="sd">    void Cbc_strengthenPackingRows(Cbc_Model *model, size_t n, const size_t rows[]);</span>

<span class="sd">    void *Cbc_getSolverPtr(Cbc_Model *model);</span>

<span class="sd">    void *Cbc_deleteModel(Cbc_Model *model);</span>

<span class="sd">    int Osi_getNumIntegers( void *osi );</span>

<span class="sd">    const double *Osi_getReducedCost( void *osi );</span>

<span class="sd">    const double *Osi_getObjCoefficients();</span>

<span class="sd">    double Osi_getObjSense();</span>

<span class="sd">    void *Osi_newSolver();</span>

<span class="sd">    void Osi_deleteSolver( void *osi );</span>

<span class="sd">    void Osi_initialSolve(void *osi);</span>

<span class="sd">    void Osi_resolve(void *osi);</span>

<span class="sd">    void Osi_branchAndBound(void *osi);</span>

<span class="sd">    char Osi_isAbandoned(void *osi);</span>

<span class="sd">    char Osi_isProvenOptimal(void *osi);</span>

<span class="sd">    char Osi_isProvenPrimalInfeasible(void *osi);</span>

<span class="sd">    char Osi_isProvenDualInfeasible(void *osi);</span>

<span class="sd">    char Osi_isPrimalObjectiveLimitReached(void *osi);</span>

<span class="sd">    char Osi_isDualObjectiveLimitReached(void *osi);</span>

<span class="sd">    char Osi_isIterationLimitReached(void *osi);</span>

<span class="sd">    double Osi_getObjValue( void *osi );</span>

<span class="sd">    void Osi_setColUpper (void *osi, int elementIndex, double ub);</span>

<span class="sd">    void Osi_setColLower(void *osi, int elementIndex, double lb);</span>

<span class="sd">    int Osi_getNumCols( void *osi );</span>

<span class="sd">    void Osi_getColName( void *osi, int i, char *name, int maxLen );</span>

<span class="sd">    const double *Osi_getColLower( void *osi );</span>

<span class="sd">    const double *Osi_getColUpper( void *osi );</span>

<span class="sd">    int Osi_isInteger( void *osi, int col );</span>

<span class="sd">    int Osi_getNumRows( void *osi );</span>

<span class="sd">    int Osi_getRowNz(void *osi, int row);</span>

<span class="sd">    const int *Osi_getRowIndices(void *osi, int row);</span>

<span class="sd">    const double *Osi_getRowCoeffs(void *osi, int row);</span>

<span class="sd">    double Osi_getRowRHS(void *osi, int row);</span>

<span class="sd">    char Osi_getRowSense(void *osi, int row);</span>

<span class="sd">    void Osi_setObjCoef(void *osi, int index, double obj);</span>

<span class="sd">    void Osi_setObjSense(void *osi, double sense);</span>

<span class="sd">    const double *Osi_getColSolution(void *osi);</span>

<span class="sd">    void *OsiCuts_new();</span>

<span class="sd">    void OsiCuts_addRowCut( void *osiCuts, int nz, const int *idx,</span>
<span class="sd">        const double *coef, char sense, double rhs );</span>

<span class="sd">    void OsiCuts_addGlobalRowCut( void *osiCuts, int nz, const int *idx,</span>
<span class="sd">        const double *coef, char sense, double rhs );</span>

<span class="sd">    int OsiCuts_sizeRowCuts( void *osiCuts );</span>

<span class="sd">    int OsiCuts_nzRowCut( void *osiCuts, int iRowCut );</span>

<span class="sd">    const int * OsiCuts_idxRowCut( void *osiCuts, int iRowCut );</span>

<span class="sd">    const double *OsiCuts_coefRowCut( void *osiCuts, int iRowCut );</span>

<span class="sd">    double OsiCuts_rhsRowCut( void *osiCuts, int iRowCut );</span>

<span class="sd">    char OsiCuts_senseRowCut( void *osiCuts, int iRowCut );</span>

<span class="sd">    void OsiCuts_delete( void *osiCuts );</span>

<span class="sd">    void Osi_addCol(void *osi, const char *name, double lb, double ub,</span>
<span class="sd">       double obj, char isInteger, int nz, int *rows, double *coefs);</span>

<span class="sd">    void Osi_addRow(void *osi, const char *name, int nz,</span>
<span class="sd">        const int *cols, const double *coefs, char sense, double rhs);</span>

<span class="sd">    void Cbc_deleteRows(Cbc_Model *model, int numRows, const int rows[]);</span>

<span class="sd">    void Cbc_deleteCols(Cbc_Model *model, int numCols, const int cols[]);</span>

<span class="sd">    void Cbc_storeNameIndexes(Cbc_Model *model, char _store);</span>

<span class="sd">    int Cbc_getColNameIndex(Cbc_Model *model, const char *name);</span>

<span class="sd">    int Cbc_getRowNameIndex(Cbc_Model *model, const char *name);</span>

<span class="sd">    void Cbc_problemName(Cbc_Model *model, int maxNumberCharacters,</span>
<span class="sd">                         char *array);</span>

<span class="sd">    int Cbc_setProblemName(Cbc_Model *model, const char *array);</span>

<span class="sd">    double Cbc_getPrimalTolerance(Cbc_Model *model);</span>

<span class="sd">    void Cbc_setPrimalTolerance(Cbc_Model *model, double tol);</span>

<span class="sd">    double Cbc_getDualTolerance(Cbc_Model *model);</span>

<span class="sd">    void Cbc_setDualTolerance(Cbc_Model *model, double tol);</span>

<span class="sd">    void Cbc_addCutCallback(Cbc_Model *model, cbc_cut_callback cutcb,</span>
<span class="sd">        const char *name, void *appData, int howOften, char atSolution );</span>

<span class="sd">    void Cbc_addIncCallback(</span>
<span class="sd">        void *model, cbc_incumbent_callback inccb,</span>
<span class="sd">        void *appData );</span>

<span class="sd">    void Cbc_registerCallBack(Cbc_Model *model,</span>
<span class="sd">        cbc_callback userCallBack);</span>

<span class="sd">    void Cbc_addProgrCallback(void *model,</span>
<span class="sd">        cbc_progress_callback prgcbc, void *appData);</span>

<span class="sd">    void Cbc_clearCallBack(Cbc_Model *model);</span>

<span class="sd">    const double *Cbc_getRowPrice(Cbc_Model *model);</span>

<span class="sd">    const double *Osi_getRowPrice(void *osi);</span>

<span class="sd">    double Osi_getIntegerTolerance(void *osi);</span>

<span class="sd">    void Osi_checkCGraph( void *osi );</span>

<span class="sd">    const void * Osi_CGraph( void *osi );</span>

<span class="sd">    size_t CG_nodes( void *cgraph );</span>

<span class="sd">    char CG_conflicting( void *cgraph, int n1, int n2 );</span>

<span class="sd">    double CG_density( void *cgraph );</span>

<span class="sd">    typedef struct {</span>
<span class="sd">      size_t n;</span>
<span class="sd">      const size_t *neigh;</span>
<span class="sd">    } CGNeighbors;</span>

<span class="sd">    CGNeighbors CG_conflictingNodes(Cbc_Model *model, void *cgraph, size_t node);</span>

<span class="sd">    void Cbc_computeFeatures(Cbc_Model *model, double *features);</span>

<span class="sd">    int Cbc_nFeatures();</span>

<span class="sd">    const char *Cbc_featureName(int i);</span>

<span class="sd">    void Cbc_reset(Cbc_Model *model);</span>
<span class="sd">    """</span>
    <span class="p">)</span>

<div class="viewcode-block" id="CHAR_ONE"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.CHAR_ONE">[docs]</a><span class="n">CHAR_ONE</span> <span class="o">=</span> <span class="s2">"</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span></div>
<div class="viewcode-block" id="CHAR_ZERO"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.CHAR_ZERO">[docs]</a><span class="n">CHAR_ZERO</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\0</span><span class="s2">"</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span></div>


<div class="viewcode-block" id="DBL_PARAM_PRIMAL_TOL"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.DBL_PARAM_PRIMAL_TOL">[docs]</a><span class="n">DBL_PARAM_PRIMAL_TOL</span> <span class="o">=</span> <span class="mi">0</span></div>
<div class="viewcode-block" id="DBL_PARAM_DUAL_TOL"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.DBL_PARAM_DUAL_TOL">[docs]</a><span class="n">DBL_PARAM_DUAL_TOL</span> <span class="o">=</span> <span class="mi">1</span></div>
<div class="viewcode-block" id="DBL_PARAM_ZERO_TOL"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.DBL_PARAM_ZERO_TOL">[docs]</a><span class="n">DBL_PARAM_ZERO_TOL</span> <span class="o">=</span> <span class="mi">2</span></div>
<div class="viewcode-block" id="DBL_PARAM_INT_TOL"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.DBL_PARAM_INT_TOL">[docs]</a><span class="n">DBL_PARAM_INT_TOL</span> <span class="o">=</span> <span class="mi">3</span></div>
<div class="viewcode-block" id="DBL_PARAM_PRESOLVE_TOL"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.DBL_PARAM_PRESOLVE_TOL">[docs]</a><span class="n">DBL_PARAM_PRESOLVE_TOL</span> <span class="o">=</span> <span class="mi">4</span></div>
<div class="viewcode-block" id="DBL_PARAM_TIME_LIMIT"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.DBL_PARAM_TIME_LIMIT">[docs]</a><span class="n">DBL_PARAM_TIME_LIMIT</span> <span class="o">=</span> <span class="mi">5</span></div>
<div class="viewcode-block" id="DBL_PARAM_PSI"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.DBL_PARAM_PSI">[docs]</a><span class="n">DBL_PARAM_PSI</span> <span class="o">=</span> <span class="mi">6</span></div>
<div class="viewcode-block" id="DBL_PARAM_CUTOFF"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.DBL_PARAM_CUTOFF">[docs]</a><span class="n">DBL_PARAM_CUTOFF</span> <span class="o">=</span> <span class="mi">7</span></div>
<div class="viewcode-block" id="DBL_PARAM_ALLOWABLE_GAP"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.DBL_PARAM_ALLOWABLE_GAP">[docs]</a><span class="n">DBL_PARAM_ALLOWABLE_GAP</span> <span class="o">=</span> <span class="mi">8</span></div>
<div class="viewcode-block" id="DBL_PARAM_GAP_RATIO"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.DBL_PARAM_GAP_RATIO">[docs]</a><span class="n">DBL_PARAM_GAP_RATIO</span> <span class="o">=</span> <span class="mi">9</span></div>
<div class="viewcode-block" id="DBL_PARAM_MAX_SECS_NOT_IMPROV_FS"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.DBL_PARAM_MAX_SECS_NOT_IMPROV_FS">[docs]</a><span class="n">DBL_PARAM_MAX_SECS_NOT_IMPROV_FS</span> <span class="o">=</span> <span class="mi">10</span></div>

<div class="viewcode-block" id="INT_PARAM_PERT_VALUE"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_PERT_VALUE">[docs]</a><span class="n">INT_PARAM_PERT_VALUE</span> <span class="o">=</span> <span class="mi">0</span></div>
<div class="viewcode-block" id="INT_PARAM_IDIOT"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_IDIOT">[docs]</a><span class="n">INT_PARAM_IDIOT</span> <span class="o">=</span> <span class="mi">1</span></div>
<div class="viewcode-block" id="INT_PARAM_STRONG_BRANCHING"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_STRONG_BRANCHING">[docs]</a><span class="n">INT_PARAM_STRONG_BRANCHING</span> <span class="o">=</span> <span class="mi">2</span></div>
<div class="viewcode-block" id="INT_PARAM_CUT_DEPTH"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_CUT_DEPTH">[docs]</a><span class="n">INT_PARAM_CUT_DEPTH</span> <span class="o">=</span> <span class="mi">3</span></div>
<div class="viewcode-block" id="INT_PARAM_MAX_NODES"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_MAX_NODES">[docs]</a><span class="n">INT_PARAM_MAX_NODES</span> <span class="o">=</span> <span class="mi">4</span></div>
<div class="viewcode-block" id="INT_PARAM_NUMBER_BEFORE"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_NUMBER_BEFORE">[docs]</a><span class="n">INT_PARAM_NUMBER_BEFORE</span> <span class="o">=</span> <span class="mi">5</span></div>
<div class="viewcode-block" id="INT_PARAM_FPUMP_ITS"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_FPUMP_ITS">[docs]</a><span class="n">INT_PARAM_FPUMP_ITS</span> <span class="o">=</span> <span class="mi">6</span></div>
<div class="viewcode-block" id="INT_PARAM_MAX_SOLS"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_MAX_SOLS">[docs]</a><span class="n">INT_PARAM_MAX_SOLS</span> <span class="o">=</span> <span class="mi">7</span></div>
<div class="viewcode-block" id="INT_PARAM_CUT_PASS_IN_TREE"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_CUT_PASS_IN_TREE">[docs]</a><span class="n">INT_PARAM_CUT_PASS_IN_TREE</span> <span class="o">=</span> <span class="mi">8</span></div>
<div class="viewcode-block" id="INT_PARAM_THREADS"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_THREADS">[docs]</a><span class="n">INT_PARAM_THREADS</span> <span class="o">=</span> <span class="mi">9</span></div>
<div class="viewcode-block" id="INT_PARAM_CUT_PASS"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_CUT_PASS">[docs]</a><span class="n">INT_PARAM_CUT_PASS</span> <span class="o">=</span> <span class="mi">10</span></div>
<div class="viewcode-block" id="INT_PARAM_LOG_LEVEL"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_LOG_LEVEL">[docs]</a><span class="n">INT_PARAM_LOG_LEVEL</span> <span class="o">=</span> <span class="mi">11</span></div>
<div class="viewcode-block" id="INT_PARAM_MAX_SAVED_SOLS"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_MAX_SAVED_SOLS">[docs]</a><span class="n">INT_PARAM_MAX_SAVED_SOLS</span> <span class="o">=</span> <span class="mi">12</span></div>
<div class="viewcode-block" id="INT_PARAM_MULTIPLE_ROOTS"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_MULTIPLE_ROOTS">[docs]</a><span class="n">INT_PARAM_MULTIPLE_ROOTS</span> <span class="o">=</span> <span class="mi">13</span></div>
<div class="viewcode-block" id="INT_PARAM_ROUND_INT_VARS"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_ROUND_INT_VARS">[docs]</a><span class="n">INT_PARAM_ROUND_INT_VARS</span> <span class="o">=</span> <span class="mi">14</span></div>
<div class="viewcode-block" id="INT_PARAM_RANDOM_SEED"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_RANDOM_SEED">[docs]</a><span class="n">INT_PARAM_RANDOM_SEED</span> <span class="o">=</span> <span class="mi">15</span></div>
<div class="viewcode-block" id="INT_PARAM_ELAPSED_TIME"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_ELAPSED_TIME">[docs]</a><span class="n">INT_PARAM_ELAPSED_TIME</span> <span class="o">=</span> <span class="mi">16</span></div>
<div class="viewcode-block" id="INT_PARAM_CGRAPH"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_CGRAPH">[docs]</a><span class="n">INT_PARAM_CGRAPH</span> <span class="o">=</span> <span class="mi">17</span></div>
<div class="viewcode-block" id="INT_PARAM_CLIQUE_MERGING"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_CLIQUE_MERGING">[docs]</a><span class="n">INT_PARAM_CLIQUE_MERGING</span> <span class="o">=</span> <span class="mi">18</span></div>
<div class="viewcode-block" id="INT_PARAM_MAX_NODES_NOT_IMPROV_FS"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.INT_PARAM_MAX_NODES_NOT_IMPROV_FS">[docs]</a><span class="n">INT_PARAM_MAX_NODES_NOT_IMPROV_FS</span> <span class="o">=</span> <span class="mi">19</span></div>


<div class="viewcode-block" id="Osi_getNumCols"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.Osi_getNumCols">[docs]</a><span class="n">Osi_getNumCols</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getNumCols</span></div>
<div class="viewcode-block" id="Osi_getColSolution"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.Osi_getColSolution">[docs]</a><span class="n">Osi_getColSolution</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getColSolution</span></div>
<div class="viewcode-block" id="Osi_getIntegerTolerance"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.Osi_getIntegerTolerance">[docs]</a><span class="n">Osi_getIntegerTolerance</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getIntegerTolerance</span></div>
<div class="viewcode-block" id="Osi_isInteger"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.Osi_isInteger">[docs]</a><span class="n">Osi_isInteger</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_isInteger</span></div>
<div class="viewcode-block" id="Osi_isProvenOptimal"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.Osi_isProvenOptimal">[docs]</a><span class="n">Osi_isProvenOptimal</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_isProvenOptimal</span></div>
<div class="viewcode-block" id="Cbc_setIntParam"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.Cbc_setIntParam">[docs]</a><span class="n">Cbc_setIntParam</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setIntParam</span></div>
<div class="viewcode-block" id="Cbc_setDblParam"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.Cbc_setDblParam">[docs]</a><span class="n">Cbc_setDblParam</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setDblParam</span></div>
<div class="viewcode-block" id="Cbc_getSolverPtr"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.Cbc_getSolverPtr">[docs]</a><span class="n">Cbc_getSolverPtr</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getSolverPtr</span></div>

<div class="viewcode-block" id="Cbc_generateCuts"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.Cbc_generateCuts">[docs]</a><span class="n">Cbc_generateCuts</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_generateCuts</span></div>
<div class="viewcode-block" id="Cbc_solveLinearProgram"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.Cbc_solveLinearProgram">[docs]</a><span class="n">Cbc_solveLinearProgram</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_solveLinearProgram</span></div>

<div class="viewcode-block" id="Cbc_reset"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.Cbc_reset">[docs]</a><span class="n">Cbc_reset</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_reset</span></div>

<div class="viewcode-block" id="Cbc_computeFeatures"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.Cbc_computeFeatures">[docs]</a><span class="n">Cbc_computeFeatures</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_computeFeatures</span></div>
<div class="viewcode-block" id="Cbc_nFeatures"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.Cbc_nFeatures">[docs]</a><span class="n">Cbc_nFeatures</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_nFeatures</span></div>
<div class="viewcode-block" id="Cbc_featureName"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.Cbc_featureName">[docs]</a><span class="n">Cbc_featureName</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_featureName</span></div>

<div class="viewcode-block" id="OsiCuts_new"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.OsiCuts_new">[docs]</a><span class="n">OsiCuts_new</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">OsiCuts_new</span></div>
<div class="viewcode-block" id="OsiCuts_addRowCut"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.OsiCuts_addRowCut">[docs]</a><span class="n">OsiCuts_addRowCut</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">OsiCuts_addRowCut</span></div>
<div class="viewcode-block" id="OsiCuts_addGlobalRowCut"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.OsiCuts_addGlobalRowCut">[docs]</a><span class="n">OsiCuts_addGlobalRowCut</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">OsiCuts_addGlobalRowCut</span></div>
<div class="viewcode-block" id="OsiCuts_sizeRowCuts"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.OsiCuts_sizeRowCuts">[docs]</a><span class="n">OsiCuts_sizeRowCuts</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">OsiCuts_sizeRowCuts</span></div>
<div class="viewcode-block" id="OsiCuts_nzRowCut"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.OsiCuts_nzRowCut">[docs]</a><span class="n">OsiCuts_nzRowCut</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">OsiCuts_nzRowCut</span></div>
<div class="viewcode-block" id="OsiCuts_idxRowCut"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.OsiCuts_idxRowCut">[docs]</a><span class="n">OsiCuts_idxRowCut</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">OsiCuts_idxRowCut</span></div>
<div class="viewcode-block" id="OsiCuts_coefRowCut"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.OsiCuts_coefRowCut">[docs]</a><span class="n">OsiCuts_coefRowCut</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">OsiCuts_coefRowCut</span></div>
<div class="viewcode-block" id="OsiCuts_rhsRowCut"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.OsiCuts_rhsRowCut">[docs]</a><span class="n">OsiCuts_rhsRowCut</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">OsiCuts_rhsRowCut</span></div>
<div class="viewcode-block" id="OsiCuts_senseRowCut"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.OsiCuts_senseRowCut">[docs]</a><span class="n">OsiCuts_senseRowCut</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">OsiCuts_senseRowCut</span></div>
<div class="viewcode-block" id="OsiCuts_delete"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.OsiCuts_delete">[docs]</a><span class="n">OsiCuts_delete</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">OsiCuts_delete</span></div>


<div class="viewcode-block" id="cbc_set_parameter"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.cbc_set_parameter">[docs]</a><span class="k">def</span> <span class="nf">cbc_set_parameter</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">Solver</span><span class="p">,</span> <span class="n">param</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setParameter</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">param</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">),</span> <span class="n">value</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">))</span></div>


<div class="viewcode-block" id="SolverCbc"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc">[docs]</a><span class="k">class</span> <span class="nc">SolverCbc</span><span class="p">(</span><span class="n">Solver</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">Model</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sense</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">sense</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_newModel</span><span class="p">()</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_storeNameIndexes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">CHAR_ONE</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">iidx_space</span> <span class="o">=</span> <span class="mi">4096</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iidx</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"int[</span><span class="si">%d</span><span class="s2">]"</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">iidx_space</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dvec</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"double[</span><span class="si">%d</span><span class="s2">]"</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">iidx_space</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_objconst</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="c1"># to not add cut generators twice when reoptimizing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">added_cut_callback</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">added_inc_callback</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># setting objective sense</span>
        <span class="k">if</span> <span class="n">sense</span> <span class="o">==</span> <span class="n">MAXIMIZE</span><span class="p">:</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setObjSense</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">emphasis</span> <span class="o">=</span> <span class="n">SearchEmphasis</span><span class="o">.</span><span class="n">DEFAULT</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__threads</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__verbose</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__verbose</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># pre-allocate temporary space to query names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__name_space</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"char[</span><span class="si">{}</span><span class="s2">]"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">MAX_NAME_SIZE</span><span class="p">))</span>
        <span class="c1"># in cut generation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__name_spacec</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"char[</span><span class="si">{}</span><span class="s2">]"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">MAX_NAME_SIZE</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__log</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">[]</span>
        <span class="p">)</span>  <span class="c1"># type: List[Tuple[numbers.Real, Tuple[numbers.Real, numbers.Real]]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_problem_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__pumpp</span> <span class="o">=</span> <span class="n">DEF_PUMPP</span>

        <span class="c1"># where solution will be stored</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__x</span> <span class="o">=</span> <span class="n">EmptyVarSol</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rc</span> <span class="o">=</span> <span class="n">EmptyVarSol</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__pi</span> <span class="o">=</span> <span class="n">EmptyRowSol</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__slack</span> <span class="o">=</span> <span class="n">EmptyRowSol</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__obj_val</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__obj_bound</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__num_solutions</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">__clear_sol</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s2">"SolverCbc"</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__x</span> <span class="o">=</span> <span class="n">EmptyVarSol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rc</span> <span class="o">=</span> <span class="n">EmptyVarSol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__pi</span> <span class="o">=</span> <span class="n">EmptyRowSol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__slack</span> <span class="o">=</span> <span class="n">EmptyRowSol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__obj_val</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__obj_bound</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__num_solutions</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="SolverCbc.add_var"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.add_var">[docs]</a>    <span class="k">def</span> <span class="nf">add_var</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">obj</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">lb</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">ub</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">"inf"</span><span class="p">),</span>
        <span class="n">coltype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"C"</span><span class="p">,</span>
        <span class="n">column</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Column</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="n">column</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">vind</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span>
            <span class="n">vval</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span>
            <span class="n">numnz</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">numnz</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">constrs</span><span class="p">)</span>
            <span class="n">vind</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"int[]"</span><span class="p">,</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">idx</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">column</span><span class="o">.</span><span class="n">constrs</span><span class="p">])</span>
            <span class="n">vval</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"double[]"</span><span class="p">,</span> <span class="p">[</span><span class="n">coef</span> <span class="k">for</span> <span class="n">coef</span> <span class="ow">in</span> <span class="n">column</span><span class="o">.</span><span class="n">coeffs</span><span class="p">])</span>

        <span class="n">isInt</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">CHAR_ONE</span> <span class="k">if</span> <span class="n">coltype</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">"B"</span> <span class="ow">or</span> <span class="n">coltype</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">"I"</span> <span class="k">else</span> <span class="n">CHAR_ZERO</span>
        <span class="p">)</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_addCol</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span>
            <span class="n">name</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">),</span>
            <span class="n">lb</span><span class="p">,</span>
            <span class="n">ub</span><span class="p">,</span>
            <span class="n">obj</span><span class="p">,</span>
            <span class="n">isInt</span><span class="p">,</span>
            <span class="n">numnz</span><span class="p">,</span>
            <span class="n">vind</span><span class="p">,</span>
            <span class="n">vval</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.update_conflict_graph"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.update_conflict_graph">[docs]</a>    <span class="k">def</span> <span class="nf">update_conflict_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s2">"SolverCbc"</span><span class="p">):</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_updateConflictGraph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.cgraph_density"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.cgraph_density">[docs]</a>    <span class="k">def</span> <span class="nf">cgraph_density</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s2">"SolverCbc"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="n">cg</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_conflictGraph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cg</span> <span class="o">==</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">CG_density</span><span class="p">(</span><span class="n">cg</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.conflicting"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.conflicting">[docs]</a>    <span class="k">def</span> <span class="nf">conflicting</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s2">"SolverCbc"</span><span class="p">,</span>
        <span class="n">e1</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">"LinExpr"</span><span class="p">,</span> <span class="s2">"Var"</span><span class="p">],</span>
        <span class="n">e2</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">"LinExpr"</span><span class="p">,</span> <span class="s2">"Var"</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="n">idx1</span><span class="p">,</span> <span class="n">idx2</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e1</span><span class="p">,</span> <span class="n">Var</span><span class="p">):</span>
            <span class="n">idx1</span> <span class="o">=</span> <span class="n">e1</span><span class="o">.</span><span class="n">idx</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e1</span><span class="p">,</span> <span class="n">LinExpr</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">expr</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">e1</span><span class="o">.</span><span class="n">sense</span> <span class="o">==</span> <span class="n">EQUAL</span><span class="p">:</span>
                <span class="n">v1</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">const</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">1e-15</span><span class="p">:</span>
                    <span class="n">idx1</span> <span class="o">=</span> <span class="n">v1</span><span class="o">.</span><span class="n">idx</span> <span class="o">+</span> <span class="n">v1</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">num_cols</span>
                <span class="k">elif</span> <span class="nb">abs</span><span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">const</span> <span class="o">+</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">1e-15</span><span class="p">:</span>
                    <span class="n">idx1</span> <span class="o">=</span> <span class="n">v1</span><span class="o">.</span><span class="n">idx</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">InvalidParameter</span><span class="p">(</span>
                        <span class="s2">"LinExpr should contain an "</span>
                        <span class="s2">"assignment to a binary variable, "</span>
                        <span class="s2">"e.g.: x1 == 1"</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">InvalidParameter</span><span class="p">(</span>
                    <span class="s2">"LinExpr should contain an "</span>
                    <span class="s2">"assignment to a binary variable, "</span>
                    <span class="s2">"e.g.: x1 == 1"</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">"type </span><span class="si">{}</span><span class="s2"> not supported"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">e1</span><span class="p">)))</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e2</span><span class="p">,</span> <span class="n">Var</span><span class="p">):</span>
            <span class="n">idx2</span> <span class="o">=</span> <span class="n">e2</span><span class="o">.</span><span class="n">idx</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e2</span><span class="p">,</span> <span class="n">LinExpr</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">e2</span><span class="o">.</span><span class="n">expr</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">e2</span><span class="o">.</span><span class="n">sense</span> <span class="o">==</span> <span class="n">EQUAL</span><span class="p">:</span>
                <span class="n">v2</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">e2</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">e2</span><span class="o">.</span><span class="n">const</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">1e-15</span><span class="p">:</span>
                    <span class="n">idx2</span> <span class="o">=</span> <span class="n">v2</span><span class="o">.</span><span class="n">idx</span> <span class="o">+</span> <span class="n">v2</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">num_cols</span>
                <span class="k">elif</span> <span class="nb">abs</span><span class="p">(</span><span class="n">e2</span><span class="o">.</span><span class="n">const</span> <span class="o">+</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">1e-15</span><span class="p">:</span>
                    <span class="n">idx2</span> <span class="o">=</span> <span class="n">v2</span><span class="o">.</span><span class="n">idx</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">InvalidParameter</span><span class="p">(</span>
                        <span class="s2">"LinExpr should contain an "</span>
                        <span class="s2">"assignment to a binary variable, "</span>
                        <span class="s2">"e.g.: x1 == 1"</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">InvalidParameter</span><span class="p">(</span>
                    <span class="s2">"LinExpr should contain an "</span>
                    <span class="s2">"assignment to a binary variable, "</span>
                    <span class="s2">"e.g.: x1 == 1"</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">"type </span><span class="si">{}</span><span class="s2"> not supported"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">e2</span><span class="p">)))</span>

        <span class="n">cg</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_conflictGraph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cg</span> <span class="o">==</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">CG_conflicting</span><span class="p">(</span><span class="n">cg</span><span class="p">,</span> <span class="n">idx1</span><span class="p">,</span> <span class="n">idx2</span><span class="p">)</span> <span class="o">==</span> <span class="n">CHAR_ONE</span></div>

<div class="viewcode-block" id="SolverCbc.conflicting_nodes"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.conflicting_nodes">[docs]</a>    <span class="k">def</span> <span class="nf">conflicting_nodes</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s2">"SolverCbc"</span><span class="p">,</span> <span class="n">v1</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">"Var"</span><span class="p">,</span> <span class="s2">"LinExpr"</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="s2">"Var"</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="s2">"Var"</span><span class="p">]]:</span>
        <span class="sd">"""Returns all assignment conflicting with the assignment in v1 in the</span>
<span class="sd">        conflict graph.</span>
<span class="sd">        """</span>
        <span class="n">cg</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_conflictGraph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cg</span> <span class="o">==</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="nb">list</span><span class="p">(),</span> <span class="nb">list</span><span class="p">())</span>

        <span class="n">idx1</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">Var</span><span class="p">):</span>
            <span class="n">idx1</span> <span class="o">=</span> <span class="n">v1</span><span class="o">.</span><span class="n">idx</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">LinExpr</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">v1</span><span class="o">.</span><span class="n">expr</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">v1</span><span class="o">.</span><span class="n">sense</span> <span class="o">==</span> <span class="n">EQUAL</span><span class="p">:</span>
                <span class="n">var</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">v1</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">v1</span><span class="o">.</span><span class="n">const</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">1e-15</span><span class="p">:</span>
                    <span class="n">idx1</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span> <span class="o">+</span> <span class="n">var</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">num_cols</span>
                <span class="k">elif</span> <span class="nb">abs</span><span class="p">(</span><span class="n">v1</span><span class="o">.</span><span class="n">const</span> <span class="o">+</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">1e-15</span><span class="p">:</span>
                    <span class="n">idx1</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">InvalidParameter</span><span class="p">(</span>
                        <span class="s2">"LinExpr should contain an "</span>
                        <span class="s2">"assignment to a binary variable, "</span>
                        <span class="s2">"e.g.: x1 == 1"</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">InvalidParameter</span><span class="p">(</span>
                    <span class="s2">"LinExpr should contain an "</span>
                    <span class="s2">"assignment to a binary variable, "</span>
                    <span class="s2">"e.g.: x1 == 1"</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">"type </span><span class="si">{}</span><span class="s2"> not supported"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">v1</span><span class="p">)))</span>

        <span class="n">cgn</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">CG_conflictingNodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">cg</span><span class="p">,</span> <span class="n">idx1</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">cgn</span><span class="o">.</span><span class="n">n</span>
        <span class="n">neighs</span> <span class="o">=</span> <span class="n">cgn</span><span class="o">.</span><span class="n">neigh</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">num_cols</span>
        <span class="n">l1</span><span class="p">,</span> <span class="n">l0</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">cgn</span><span class="o">.</span><span class="n">neigh</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">cols</span><span class="p">:</span>
                <span class="n">l1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="n">neighs</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">l0</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="n">neighs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">cols</span><span class="p">])</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">l1</span><span class="p">,</span> <span class="n">l0</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.get_objective_const"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_objective_const">[docs]</a>    <span class="k">def</span> <span class="nf">get_objective_const</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objconst</span></div>

<div class="viewcode-block" id="SolverCbc.get_objective"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_objective">[docs]</a>    <span class="k">def</span> <span class="nf">get_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinExpr</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getObjCoefficients</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="o">==</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ParameterNotAvailable</span><span class="p">(</span><span class="s2">"Error getting objective function coefficients"</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">xsum</span><span class="p">(</span>
                <span class="n">obj</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_cols</span><span class="p">())</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mf">1e-15</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objconst</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.set_objective"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.set_objective">[docs]</a>    <span class="k">def</span> <span class="nf">set_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lin_expr</span><span class="p">:</span> <span class="s2">"LinExpr"</span><span class="p">,</span> <span class="n">sense</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">""</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># collecting variable coefficients</span>

        <span class="n">c</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"double[]"</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_cols</span><span class="p">())])</span>
        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coeff</span> <span class="ow">in</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">c</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">coeff</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_cols</span><span class="p">()):</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setObjCoeff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="c1"># objective function constant</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objconst</span> <span class="o">=</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">const</span>

        <span class="c1"># setting objective sense</span>
        <span class="k">if</span> <span class="n">MAXIMIZE</span> <span class="ow">in</span> <span class="p">(</span><span class="n">lin_expr</span><span class="o">.</span><span class="n">sense</span><span class="p">,</span> <span class="n">sense</span><span class="p">):</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setObjSense</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">MINIMIZE</span> <span class="ow">in</span> <span class="p">(</span><span class="n">lin_expr</span><span class="o">.</span><span class="n">sense</span><span class="p">,</span> <span class="n">sense</span><span class="p">):</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setObjSense</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.relax"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.relax">[docs]</a>    <span class="k">def</span> <span class="nf">relax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">vars</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_isInteger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">):</span>
                <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setContinuous</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.get_max_seconds"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_max_seconds">[docs]</a>    <span class="k">def</span> <span class="nf">get_max_seconds</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getMaximumSeconds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.set_max_seconds"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.set_max_seconds">[docs]</a>    <span class="k">def</span> <span class="nf">set_max_seconds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_seconds</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setMaximumSeconds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">max_seconds</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.get_max_solutions"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_max_solutions">[docs]</a>    <span class="k">def</span> <span class="nf">get_max_solutions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getMaximumSolutions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.set_max_solutions"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.set_max_solutions">[docs]</a>    <span class="k">def</span> <span class="nf">set_max_solutions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_solutions</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setMaximumSolutions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">max_solutions</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.get_max_nodes"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_max_nodes">[docs]</a>    <span class="k">def</span> <span class="nf">get_max_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getMaximumNodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.set_max_nodes"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.set_max_nodes">[docs]</a>    <span class="k">def</span> <span class="nf">set_max_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_nodes</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setMaximumNodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">max_nodes</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.get_verbose"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_verbose">[docs]</a>    <span class="k">def</span> <span class="nf">get_verbose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__verbose</span></div>

<div class="viewcode-block" id="SolverCbc.set_verbose"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.set_verbose">[docs]</a>    <span class="k">def</span> <span class="nf">set_verbose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__verbose</span> <span class="o">=</span> <span class="n">verbose</span></div>

<div class="viewcode-block" id="SolverCbc.var_set_var_type"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.var_set_var_type">[docs]</a>    <span class="k">def</span> <span class="nf">var_set_var_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">cv</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">var_type</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">cv</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">cv</span> <span class="o">==</span> <span class="n">CONTINUOUS</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">INTEGER</span> <span class="ow">or</span> <span class="n">value</span> <span class="o">==</span> <span class="n">BINARY</span><span class="p">:</span>
                <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setInteger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">CONTINUOUS</span><span class="p">:</span>
                <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setContinuous</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">BINARY</span><span class="p">:</span>
            <span class="c1"># checking bounds</span>
            <span class="k">if</span> <span class="n">var</span><span class="o">.</span><span class="n">lb</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                <span class="n">var</span><span class="o">.</span><span class="n">lb</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="k">if</span> <span class="n">var</span><span class="o">.</span><span class="n">ub</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
                <span class="n">var</span><span class="o">.</span><span class="n">ub</span> <span class="o">=</span> <span class="mf">1.0</span></div>

<div class="viewcode-block" id="SolverCbc.var_set_obj"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.var_set_obj">[docs]</a>    <span class="k">def</span> <span class="nf">var_set_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setObjCoeff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.generate_cuts"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.generate_cuts">[docs]</a>    <span class="k">def</span> <span class="nf">generate_cuts</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">cut_types</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">CutType</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">npass</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">max_cuts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">maxsize</span><span class="p">,</span>
        <span class="n">min_viol</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span> <span class="o">=</span> <span class="mf">1e-4</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CutPool</span><span class="p">:</span>
        <span class="n">cp</span> <span class="o">=</span> <span class="n">CutPool</span><span class="p">()</span>
        <span class="c1"># cbc_model = self._model</span>
        <span class="c1"># osi_solver = Cbc_getSolverPtr(cbc_model)</span>
        <span class="n">osi_cuts</span> <span class="o">=</span> <span class="n">OsiCuts_new</span><span class="p">()</span>
        <span class="n">nbin</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">vars</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">var_type</span> <span class="o">==</span> <span class="n">BINARY</span><span class="p">:</span>
                <span class="n">nbin</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">cut_types</span><span class="p">:</span>
            <span class="n">cut_types</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">CutType</span><span class="o">.</span><span class="n">GOMORY</span><span class="p">,</span>
                <span class="n">CutType</span><span class="o">.</span><span class="n">MIR</span><span class="p">,</span>
                <span class="n">CutType</span><span class="o">.</span><span class="n">TWO_MIR</span><span class="p">,</span>
                <span class="n">CutType</span><span class="o">.</span><span class="n">KNAPSACK_COVER</span><span class="p">,</span>
                <span class="n">CutType</span><span class="o">.</span><span class="n">CLIQUE</span><span class="p">,</span>
                <span class="n">CutType</span><span class="o">.</span><span class="n">ZERO_HALF</span><span class="p">,</span>
                <span class="n">CutType</span><span class="o">.</span><span class="n">ODD_WHEEL</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="k">for</span> <span class="n">cut_type</span> <span class="ow">in</span> <span class="n">cut_types</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__verbose</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">"searching for violated "</span> <span class="s2">"</span><span class="si">{}</span><span class="s2"> cuts ... "</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cut_type</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">nbin</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">cut_type</span> <span class="ow">in</span> <span class="p">[</span><span class="n">CutType</span><span class="o">.</span><span class="n">CLIQUE</span><span class="p">,</span> <span class="n">CutType</span><span class="o">.</span><span class="n">ODD_WHEEL</span><span class="p">]:</span>
                    <span class="k">continue</span>

            <span class="n">nc1</span> <span class="o">=</span> <span class="n">OsiCuts_sizeRowCuts</span><span class="p">(</span><span class="n">osi_cuts</span><span class="p">)</span>

            <span class="n">Cbc_generateCuts</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span>
                <span class="nb">int</span><span class="p">(</span><span class="n">cut_type</span><span class="o">.</span><span class="n">value</span><span class="p">),</span>
                <span class="n">osi_cuts</span><span class="p">,</span>
                <span class="nb">int</span><span class="p">(</span><span class="n">depth</span><span class="p">),</span>
                <span class="nb">int</span><span class="p">(</span><span class="n">npass</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="n">nc2</span> <span class="o">=</span> <span class="n">OsiCuts_sizeRowCuts</span><span class="p">(</span><span class="n">osi_cuts</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__verbose</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"</span><span class="si">{}</span><span class="s2"> found.</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">nc2</span> <span class="o">-</span> <span class="n">nc1</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">OsiCuts_sizeRowCuts</span><span class="p">(</span><span class="n">osi_cuts</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">max_cuts</span><span class="p">:</span>
                <span class="k">break</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">OsiCuts_sizeRowCuts</span><span class="p">(</span><span class="n">osi_cuts</span><span class="p">)):</span>
            <span class="n">rhs</span> <span class="o">=</span> <span class="n">OsiCuts_rhsRowCut</span><span class="p">(</span><span class="n">osi_cuts</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">rsense</span> <span class="o">=</span> <span class="n">OsiCuts_senseRowCut</span><span class="p">(</span><span class="n">osi_cuts</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

            <span class="n">sense</span> <span class="o">=</span> <span class="s2">""</span>
            <span class="k">if</span> <span class="n">rsense</span> <span class="o">==</span> <span class="s2">"E"</span><span class="p">:</span>
                <span class="n">sense</span> <span class="o">=</span> <span class="n">EQUAL</span>
            <span class="k">elif</span> <span class="n">rsense</span> <span class="o">==</span> <span class="s2">"L"</span><span class="p">:</span>
                <span class="n">sense</span> <span class="o">=</span> <span class="n">LESS_OR_EQUAL</span>
            <span class="k">elif</span> <span class="n">rsense</span> <span class="o">==</span> <span class="s2">"G"</span><span class="p">:</span>
                <span class="n">sense</span> <span class="o">=</span> <span class="n">GREATER_OR_EQUAL</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Unknow sense: </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rsense</span><span class="p">))</span>
            <span class="n">idx</span> <span class="o">=</span> <span class="n">OsiCuts_idxRowCut</span><span class="p">(</span><span class="n">osi_cuts</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">coef</span> <span class="o">=</span> <span class="n">OsiCuts_coefRowCut</span><span class="p">(</span><span class="n">osi_cuts</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">nz</span> <span class="o">=</span> <span class="n">OsiCuts_nzRowCut</span><span class="p">(</span><span class="n">osi_cuts</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span>
            <span class="n">levars</span> <span class="o">=</span> <span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="n">idx</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nz</span><span class="p">)]</span>
            <span class="n">lecoefs</span> <span class="o">=</span> <span class="p">[</span><span class="n">coef</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nz</span><span class="p">)]</span>
            <span class="n">cut</span> <span class="o">=</span> <span class="n">LinExpr</span><span class="p">(</span><span class="n">levars</span><span class="p">,</span> <span class="n">lecoefs</span><span class="p">,</span> <span class="o">-</span><span class="n">rhs</span><span class="p">,</span> <span class="n">sense</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">cut</span><span class="o">.</span><span class="n">violation</span> <span class="o">&lt;</span> <span class="n">min_viol</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">cp</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cut</span><span class="p">)</span>

        <span class="n">OsiCuts_delete</span><span class="p">(</span><span class="n">osi_cuts</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cp</span></div>

<div class="viewcode-block" id="SolverCbc.clique_merge"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.clique_merge">[docs]</a>    <span class="k">def</span> <span class="nf">clique_merge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constrs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="s2">"mip.Constr"</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">constrs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_strengthenPacking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">nr</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">constrs</span><span class="p">)</span>
            <span class="n">idxr</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"int[]"</span><span class="p">,</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">idx</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">constrs</span><span class="p">])</span>
            <span class="n">strengthenPacking</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_strengthenPackingRows</span>
            <span class="n">strengthenPacking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">nr</span><span class="p">,</span> <span class="n">idxr</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.optimize"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.optimize">[docs]</a>    <span class="k">def</span> <span class="nf">optimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relax</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OptimizationStatus</span><span class="p">:</span>
        <span class="c1"># get name indexes from an osi problem</span>
        <span class="k">def</span> <span class="nf">cbc_get_osi_name_indexes</span><span class="p">(</span><span class="n">osi_solver</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
            <span class="n">nameIdx</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getNumCols</span><span class="p">(</span><span class="n">osi_solver</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getColName</span><span class="p">(</span><span class="n">osi_solver</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__name_spacec</span><span class="p">,</span> <span class="n">MAX_NAME_SIZE</span><span class="p">)</span>
                <span class="n">cname</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__name_spacec</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span>
                <span class="n">nameIdx</span><span class="p">[</span><span class="n">cname</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>

            <span class="k">return</span> <span class="n">nameIdx</span>

        <span class="c1"># progress callback</span>
        <span class="nd">@ffi</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
            <span class="sd">"""</span>
<span class="sd">            int (void *, int, int, const char *, double, double, double,</span>
<span class="sd">            int, int *, void *)</span>
<span class="sd">        """</span>
        <span class="p">)</span>
        <span class="k">def</span> <span class="nf">cbc_progress_callback</span><span class="p">(</span>
            <span class="n">model</span><span class="p">,</span>
            <span class="n">phase</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
            <span class="n">step</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
            <span class="n">phaseName</span><span class="p">,</span>
            <span class="n">seconds</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">,</span>
            <span class="n">lb</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">,</span>
            <span class="n">ub</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">,</span>
            <span class="n">nint</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
            <span class="n">vint</span><span class="p">,</span>
            <span class="n">cbData</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__log</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">seconds</span><span class="p">,</span> <span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">)))</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

        <span class="c1"># incumbent callback</span>
        <span class="k">def</span> <span class="nf">cbc_inc_callback</span><span class="p">(</span>
            <span class="n">cbc_model</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">,</span> <span class="n">nz</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">colNames</span><span class="p">,</span> <span class="n">colValues</span><span class="p">,</span> <span class="n">appData</span>
        <span class="p">):</span>
            <span class="k">return</span>

        <span class="c1"># cut callback</span>
        <span class="nd">@ffi</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
            <span class="sd">"""</span>
<span class="sd">            void (void *osi_solver, void *osi_cuts, void *app_data, int level, int npass)</span>
<span class="sd">        """</span>
        <span class="p">)</span>
        <span class="k">def</span> <span class="nf">cbc_cut_callback</span><span class="p">(</span><span class="n">osi_solver</span><span class="p">,</span> <span class="n">osi_cuts</span><span class="p">,</span> <span class="n">app_data</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="n">npass</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">osi_solver</span> <span class="o">==</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span>
                <span class="ow">or</span> <span class="n">osi_cuts</span> <span class="o">==</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span>
                <span class="ow">or</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cuts_generator</span> <span class="ow">is</span> <span class="kc">None</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">lazy_constrs_generator</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="p">)</span>
            <span class="p">):</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="n">Osi_isProvenOptimal</span><span class="p">(</span><span class="n">osi_solver</span><span class="p">)</span> <span class="o">!=</span> <span class="n">CHAR_ONE</span><span class="p">:</span>
                <span class="k">return</span>

            <span class="c1"># checking if solution is fractional or not</span>
            <span class="n">nc</span> <span class="o">=</span> <span class="n">Osi_getNumCols</span><span class="p">(</span><span class="n">osi_solver</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">Osi_getColSolution</span><span class="p">(</span><span class="n">osi_solver</span><span class="p">)</span>
            <span class="n">itol</span> <span class="o">=</span> <span class="n">Osi_getIntegerTolerance</span><span class="p">(</span><span class="n">osi_solver</span><span class="p">)</span>
            <span class="n">fractional</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nc</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">Osi_isInteger</span><span class="p">(</span><span class="n">osi_solver</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
                    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">]))</span> <span class="o">&gt;</span> <span class="n">itol</span><span class="p">:</span>
                        <span class="n">fractional</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">break</span>

            <span class="n">osi_model</span> <span class="o">=</span> <span class="n">ModelOsi</span><span class="p">(</span><span class="n">osi_solver</span><span class="p">)</span>
            <span class="n">osi_model</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">osi_model</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">get_status</span><span class="p">()</span>
            <span class="n">osi_model</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">osi_cutsp</span> <span class="o">=</span> <span class="n">osi_cuts</span>
            <span class="n">osi_model</span><span class="o">.</span><span class="n">fractional</span> <span class="o">=</span> <span class="n">fractional</span>
            <span class="k">if</span> <span class="n">fractional</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cuts_generator</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cuts_generator</span><span class="o">.</span><span class="n">generate_constrs</span><span class="p">(</span><span class="n">osi_model</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="n">npass</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">fractional</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">lazy_constrs_generator</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">lazy_constrs_generator</span><span class="o">.</span><span class="n">generate_constrs</span><span class="p">(</span>
                    <span class="n">osi_model</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="n">npass</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__verbose</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setLogLevel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setLogLevel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">relax</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__clear_sol</span><span class="p">()</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">Cbc_solveLinearProgram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">res</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__x</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getColSolution</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__rc</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getReducedCost</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__pi</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getRowPrice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__slack</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getRowSlack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__obj_val</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getObjValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objconst</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__obj_bound</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__obj_val</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__num_solutions</span> <span class="o">=</span> <span class="mi">1</span>

                <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">OPTIMAL</span>
            <span class="k">if</span> <span class="n">res</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">UNBOUNDED</span>
            <span class="k">if</span> <span class="n">res</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">INFEASIBLE</span>
            <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">ERROR</span>

        <span class="c1"># adding cut generators</span>
        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span>
        <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">cuts_generator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">atSol</span> <span class="o">=</span> <span class="n">CHAR_ZERO</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_addCutCallback</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span>
                <span class="n">cbc_cut_callback</span><span class="p">,</span>
                <span class="s2">"UserCuts"</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">),</span>
                <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">,</span>
                <span class="mi">1</span><span class="p">,</span>
                <span class="n">atSol</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">lazy_constrs_generator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">atSol</span> <span class="o">=</span> <span class="n">CHAR_ONE</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"preprocess"</span><span class="p">,</span> <span class="s2">"off"</span><span class="p">)</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"clqstr"</span><span class="p">,</span> <span class="s2">"off"</span><span class="p">)</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"heur"</span><span class="p">,</span> <span class="s2">"off"</span><span class="p">)</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_addCutCallback</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span>
                <span class="n">cbc_cut_callback</span><span class="p">,</span>
                <span class="s2">"LazyConstraints"</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">),</span>
                <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">,</span>
                <span class="mi">1</span><span class="p">,</span>
                <span class="n">atSol</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># no lazy constraints, more freedom to change parameters</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">preprocess</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"preprocess"</span><span class="p">,</span> <span class="s2">"off"</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">preprocess</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"preprocess"</span><span class="p">,</span> <span class="s2">"sos"</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__pumpp</span> <span class="o">!=</span> <span class="n">DEF_PUMPP</span><span class="p">:</span>
                <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"passf"</span><span class="p">,</span> <span class="s2">"</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__pumpp</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">emphasis</span> <span class="o">==</span> <span class="n">SearchEmphasis</span><span class="o">.</span><span class="n">FEASIBILITY</span><span class="p">:</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"passf"</span><span class="p">,</span> <span class="s2">"50"</span><span class="p">)</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"proximity"</span><span class="p">,</span> <span class="s2">"on"</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">emphasis</span> <span class="o">==</span> <span class="n">SearchEmphasis</span><span class="o">.</span><span class="n">OPTIMALITY</span><span class="p">:</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"strong"</span><span class="p">,</span> <span class="s2">"10"</span><span class="p">)</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"trust"</span><span class="p">,</span> <span class="s2">"20"</span><span class="p">)</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"lagomory"</span><span class="p">,</span> <span class="s2">"endonly"</span><span class="p">)</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"latwomir"</span><span class="p">,</span> <span class="s2">"endonly"</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cuts</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"cuts"</span><span class="p">,</span> <span class="s2">"off"</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cuts</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"cuts"</span><span class="p">,</span> <span class="s2">"on"</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cuts</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"lagomory"</span><span class="p">,</span> <span class="s2">"endcleanroot"</span><span class="p">)</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"latwomir"</span><span class="p">,</span> <span class="s2">"endcleanroot"</span><span class="p">)</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"passC"</span><span class="p">,</span> <span class="s2">"-25"</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cuts</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"passC"</span><span class="p">,</span> <span class="s2">"-35"</span><span class="p">)</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"lift"</span><span class="p">,</span> <span class="s2">"ifmove"</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__threads</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"timeMode"</span><span class="p">,</span> <span class="s2">"</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">"elapsed"</span><span class="p">))</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"threads"</span><span class="p">,</span> <span class="s2">"</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__threads</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__threads</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"threads"</span><span class="p">,</span> <span class="s2">"</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">multip</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">()))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cut_passes</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"passc"</span><span class="p">,</span> <span class="s2">"</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cut_passes</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">clique</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"clique"</span><span class="p">,</span> <span class="s2">"off"</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">clique</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"clique"</span><span class="p">,</span> <span class="s2">"forceon"</span><span class="p">)</span>

        <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"maxSavedSolutions"</span><span class="p">,</span> <span class="s2">"10"</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">store_search_progress_log</span><span class="p">:</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_addProgrCallback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">cbc_progress_callback</span><span class="p">,</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">integer_tol</span> <span class="o">&gt;=</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setDblParam</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">DBL_PARAM_INT_TOL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">integer_tol</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">infeas_tol</span> <span class="o">&gt;=</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setPrimalTolerance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">infeas_tol</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">opt_tol</span> <span class="o">&gt;=</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setDualTolerance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">opt_tol</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">lp_method</span> <span class="o">==</span> <span class="n">LP_Method</span><span class="o">.</span><span class="n">BARRIER</span><span class="p">:</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setLPmethod</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">LPM_Barrier</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">lp_method</span> <span class="o">==</span> <span class="n">LP_Method</span><span class="o">.</span><span class="n">BARRIERNOCROSS</span><span class="p">:</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setLPmethod</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">LPM_BarrierNoCross</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">lp_method</span> <span class="o">==</span> <span class="n">LP_Method</span><span class="o">.</span><span class="n">DUAL</span><span class="p">:</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setLPmethod</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">LPM_Dual</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">lp_method</span> <span class="o">==</span> <span class="n">LP_Method</span><span class="o">.</span><span class="n">PRIMAL</span><span class="p">:</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setLPmethod</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">LPM_Primal</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setLPmethod</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">LPM_Auto</span><span class="p">)</span>

        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setAllowableFractionGap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">max_mip_gap</span><span class="p">)</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setAllowableGap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">max_mip_gap_abs</span><span class="p">)</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setIntParam</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">INT_PARAM_RANDOM_SEED</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">seed</span><span class="p">)</span>

        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setIntParam</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span>
            <span class="n">INT_PARAM_ROUND_INT_VARS</span><span class="p">,</span>
            <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">round_int_vars</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setIntParam</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">INT_PARAM_MAX_SAVED_SOLS</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sol_pool_size</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__clear_sol</span><span class="p">()</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_solve</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_isAbandoned</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">ERROR</span>

        <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_isProvenOptimal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__x</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getColSolution</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__slack</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getRowSlack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__obj_val</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getObjValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objconst</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__obj_bound</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__obj_val</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__num_solutions</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">num_int</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_numberSOS</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__rc</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getReducedCost</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__pi</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getRowPrice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__slack</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getRowSlack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__obj_bound</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getBestPossibleObjValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objconst</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__num_solutions</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_numberSavedSolutions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">OPTIMAL</span>

        <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_isProvenInfeasible</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">INFEASIBLE</span>

        <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_isContinuousUnbounded</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">UNBOUNDED</span>

        <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getNumIntegers</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__obj_bound</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getBestPossibleObjValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objconst</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_numberSavedSolutions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__x</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getColSolution</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__slack</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getRowSlack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__obj_val</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getObjValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objconst</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__num_solutions</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_numberSavedSolutions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>

                <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">FEASIBLE</span>

        <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">NO_SOLUTION_FOUND</span></div>

<div class="viewcode-block" id="SolverCbc.get_objective_sense"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_objective_sense">[docs]</a>    <span class="k">def</span> <span class="nf">get_objective_sense</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getObjSense</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">MAXIMIZE</span>

        <span class="k">return</span> <span class="n">MINIMIZE</span></div>

<div class="viewcode-block" id="SolverCbc.set_objective_sense"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.set_objective_sense">[docs]</a>    <span class="k">def</span> <span class="nf">set_objective_sense</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sense</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sense</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="n">MAXIMIZE</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">():</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setObjSense</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">sense</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="n">MINIMIZE</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">():</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setObjSense</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">"Unknown sense: </span><span class="si">{}</span><span class="s2">, use </span><span class="si">{}</span><span class="s2"> or </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sense</span><span class="p">,</span> <span class="n">MAXIMIZE</span><span class="p">,</span> <span class="n">MINIMIZE</span><span class="p">)</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.get_objective_value"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_objective_value">[docs]</a>    <span class="k">def</span> <span class="nf">get_objective_value</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="c1"># return</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__obj_val</span></div>

<div class="viewcode-block" id="SolverCbc.get_status"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_status">[docs]</a>    <span class="k">def</span> <span class="nf">get_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OptimizationStatus</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_isAbandoned</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">ERROR</span>

        <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_isProvenOptimal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">OPTIMAL</span>

        <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_isProvenInfeasible</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">INFEASIBLE</span>

        <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_isContinuousUnbounded</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">UNBOUNDED</span>

        <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getNumIntegers</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_bestSolution</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">FEASIBLE</span>

        <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">NO_SOLUTION_FOUND</span></div>

<div class="viewcode-block" id="SolverCbc.get_log"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_log">[docs]</a>    <span class="k">def</span> <span class="nf">get_log</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">]]]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__log</span></div>

<div class="viewcode-block" id="SolverCbc.get_objective_bound"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_objective_bound">[docs]</a>    <span class="k">def</span> <span class="nf">get_objective_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__obj_bound</span></div>

<div class="viewcode-block" id="SolverCbc.var_get_x"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.var_get_x">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="n">Var</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">]:</span>
        <span class="c1"># model status is *already checked* Var x property</span>
        <span class="c1"># (returns None if no solution available)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__x</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span></div>

<div class="viewcode-block" id="SolverCbc.get_num_solutions"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_num_solutions">[docs]</a>    <span class="k">def</span> <span class="nf">get_num_solutions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__num_solutions</span></div>

<div class="viewcode-block" id="SolverCbc.get_objective_value_i"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_objective_value_i">[docs]</a>    <span class="k">def</span> <span class="nf">get_objective_value_i</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_savedSolutionObj</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objconst</span></div>

<div class="viewcode-block" id="SolverCbc.var_get_xi"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.var_get_xi">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_xi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="c1"># model status is *already checked* Var xi property</span>
        <span class="c1"># (returns None if no solution available)</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_savedSolution</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">i</span><span class="p">)[</span><span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span></div>

<div class="viewcode-block" id="SolverCbc.var_get_rc"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.var_get_rc">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_rc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="n">Var</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="c1"># model status is *already checked* Var rc property</span>
        <span class="c1"># (returns None if no solution available)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__rc</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span></div>

<div class="viewcode-block" id="SolverCbc.var_get_lb"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.var_get_lb">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_lb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getColLB</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.var_set_lb"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.var_set_lb">[docs]</a>    <span class="k">def</span> <span class="nf">var_set_lb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setColLower</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.var_get_ub"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.var_get_ub">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_ub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getColUB</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.var_set_ub"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.var_set_ub">[docs]</a>    <span class="k">def</span> <span class="nf">var_set_ub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setColUpper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.var_get_name"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.var_get_name">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">namep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__name_space</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getColName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">namep</span><span class="p">,</span> <span class="n">MAX_NAME_SIZE</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ffi</span><span class="o">.</span><span class="n">string</span><span class="p">(</span><span class="n">namep</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.var_get_index"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.var_get_index">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getColNameIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">name</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">))</span></div>

<div class="viewcode-block" id="SolverCbc.var_get_branch_priority"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.var_get_branch_priority">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_branch_priority</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>  <span class="c1"># todo: modify branch priority in CBC</span></div>

<div class="viewcode-block" id="SolverCbc.constr_get_index"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.constr_get_index">[docs]</a>    <span class="k">def</span> <span class="nf">constr_get_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getRowNameIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">name</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">))</span></div>

<div class="viewcode-block" id="SolverCbc.constr_get_rhs"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.constr_get_rhs">[docs]</a>    <span class="k">def</span> <span class="nf">constr_get_rhs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getRowRHS</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.constr_set_rhs"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.constr_set_rhs">[docs]</a>    <span class="k">def</span> <span class="nf">constr_set_rhs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setRowRHS</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.var_get_obj"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.var_get_obj">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="n">Var</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getColObj</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.var_get_var_type"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.var_get_var_type">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_var_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">isInt</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_isInteger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">isInt</span><span class="p">:</span>
            <span class="n">lb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_get_lb</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
            <span class="n">ub</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_get_ub</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">lb</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">1e-15</span> <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ub</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">1e-15</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">BINARY</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">INTEGER</span>

        <span class="k">return</span> <span class="n">CONTINUOUS</span></div>

<div class="viewcode-block" id="SolverCbc.var_set_column"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.var_set_column">[docs]</a>    <span class="k">def</span> <span class="nf">var_set_column</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Column</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Cbc functionality currently unavailable"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.var_get_column"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.var_get_column">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_column</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Column</span><span class="p">:</span>
        <span class="n">numnz</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getColNz</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">numnz</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Column</span><span class="p">()</span>

        <span class="n">cidx</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getColIndices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cidx</span> <span class="o">==</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ParameterNotAvailable</span><span class="p">(</span><span class="s2">"Error getting column indices'"</span><span class="p">)</span>
        <span class="n">ccoef</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getColCoeffs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Column</span><span class="p">(</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">constrs</span><span class="p">[</span><span class="n">cidx</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numnz</span><span class="p">)],</span>
            <span class="p">[</span><span class="n">ccoef</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numnz</span><span class="p">)],</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.add_constr"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.add_constr">[docs]</a>    <span class="k">def</span> <span class="nf">add_constr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lin_expr</span><span class="p">:</span> <span class="n">LinExpr</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">""</span><span class="p">):</span>
        <span class="c1"># collecting linear expression data</span>
        <span class="n">numnz</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">lin_expr</span><span class="o">.</span><span class="n">expr</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">numnz</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">iidx_space</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iidx_space</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">numnz</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iidx_space</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iidx</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"int[</span><span class="si">%d</span><span class="s2">]"</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">iidx_space</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dvec</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"double[</span><span class="si">%d</span><span class="s2">]"</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">iidx_space</span><span class="p">)</span>

        <span class="c1"># cind = self.iidx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iidx</span> <span class="o">=</span> <span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">idx</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>

        <span class="c1"># cind = ffi.new("int[]", [var.idx for var in lin_expr.expr.keys()])</span>
        <span class="c1"># cval = ffi.new("double[]", [coef for coef in lin_expr.expr.values()])</span>
        <span class="c1"># cval = self.dvec</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dvec</span> <span class="o">=</span> <span class="p">[</span><span class="n">coef</span> <span class="k">for</span> <span class="n">coef</span> <span class="ow">in</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>

        <span class="c1"># constraint sense and rhs</span>
        <span class="n">sense</span> <span class="o">=</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">sense</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="o">-</span><span class="n">lin_expr</span><span class="o">.</span><span class="n">const</span>

        <span class="n">namestr</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span>
        <span class="n">mp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_addRow</span><span class="p">(</span><span class="n">mp</span><span class="p">,</span> <span class="n">namestr</span><span class="p">,</span> <span class="n">numnz</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iidx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dvec</span><span class="p">,</span> <span class="n">sense</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.add_lazy_constr"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.add_lazy_constr">[docs]</a>    <span class="k">def</span> <span class="nf">add_lazy_constr</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s2">"Solver"</span><span class="p">,</span> <span class="n">lin_expr</span><span class="p">:</span> <span class="n">LinExpr</span><span class="p">):</span>
        <span class="c1"># collecting linear expression data</span>
        <span class="n">numnz</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">lin_expr</span><span class="o">.</span><span class="n">expr</span><span class="p">)</span>

        <span class="n">cind</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"int[]"</span><span class="p">,</span> <span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">idx</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">keys</span><span class="p">()])</span>
        <span class="n">cval</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"double[]"</span><span class="p">,</span> <span class="p">[</span><span class="n">coef</span> <span class="k">for</span> <span class="n">coef</span> <span class="ow">in</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>

        <span class="c1"># constraint sense and rhs</span>
        <span class="n">sense</span> <span class="o">=</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">sense</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="o">-</span><span class="n">lin_expr</span><span class="o">.</span><span class="n">const</span>

        <span class="n">mp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_addLazyConstraint</span><span class="p">(</span><span class="n">mp</span><span class="p">,</span> <span class="n">numnz</span><span class="p">,</span> <span class="n">cind</span><span class="p">,</span> <span class="n">cval</span><span class="p">,</span> <span class="n">sense</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.add_sos"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.add_sos">[docs]</a>    <span class="k">def</span> <span class="nf">add_sos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sos</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="s2">"Var"</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">]],</span> <span class="n">sos_type</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">starts</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"int[]"</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sos</span><span class="p">)])</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"int[]"</span><span class="p">,</span> <span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">idx</span> <span class="k">for</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> <span class="ow">in</span> <span class="n">sos</span><span class="p">])</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"double[]"</span><span class="p">,</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> <span class="ow">in</span> <span class="n">sos</span><span class="p">])</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_addSOS</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">starts</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">sos_type</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.add_cut"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.add_cut">[docs]</a>    <span class="k">def</span> <span class="nf">add_cut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lin_expr</span><span class="p">:</span> <span class="n">LinExpr</span><span class="p">):</span>
        <span class="k">global</span> <span class="n">cut_idx</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">"cut</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cut_idx</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_constr</span><span class="p">(</span><span class="n">lin_expr</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.write"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">fpstr</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">".mps"</span> <span class="ow">in</span> <span class="n">file_path</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_writeMps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">fpstr</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">".lp"</span> <span class="ow">in</span> <span class="n">file_path</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_writeLp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">fpstr</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">".bas"</span> <span class="ow">in</span> <span class="n">file_path</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_writeBasis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">fpstr</span><span class="p">,</span> <span class="n">CHAR_ONE</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">"Enter a valid extension (.lp, .mps or .bas) </span><span class="se">\</span>
<span class="s2">                to indicate the file format"</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.read"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.read">[docs]</a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">isfile</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">"File </span><span class="si">{}</span><span class="s2"> does not exists"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">file_path</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".gz"</span><span class="p">)</span> <span class="ow">and</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_supportsGzip</span><span class="p">()</span> <span class="o">==</span> <span class="n">CHAR_ZERO</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MipBaseException</span><span class="p">(</span><span class="s2">"CBC not compiled with gzip support"</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">file_path</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".bz2"</span><span class="p">)</span>
            <span class="ow">and</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_supportsBzip2</span><span class="p">()</span> <span class="o">==</span> <span class="n">CHAR_ZERO</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="n">MipBaseException</span><span class="p">(</span><span class="s2">"CBC not compiled with bzip2 support"</span><span class="p">)</span>

        <span class="n">fpstr</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">".mps"</span> <span class="ow">in</span> <span class="n">file_path</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_readMps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">fpstr</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">".lp"</span> <span class="ow">in</span> <span class="n">file_path</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_readLp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">fpstr</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">".bas"</span> <span class="ow">in</span> <span class="n">file_path</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_readBasis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">fpstr</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s2">"Error reading </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="n">file_path</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">"No values read from </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="n">file_path</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">"Optimal LP basis successfully loaded."</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">"Enter a valid extension (.lp, .mps or .bas) </span><span class="se">\</span>
<span class="s2">                to indicate the file format"</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.set_start"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.set_start">[docs]</a>    <span class="k">def</span> <span class="nf">set_start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Var</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Augment start list with default zero values for absent non-continuous variables</span>
        <span class="n">start_vars_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">var</span> <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">start</span><span class="p">)</span>

        <span class="n">default_start_noncont_vars</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">vars</span>
            <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">var_type</span> <span class="o">!=</span> <span class="s2">"C"</span> <span class="ow">and</span> <span class="n">v</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">start_vars_set</span>
        <span class="p">]</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"Adding default start values for </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">default_start_noncont_vars</span><span class="p">)</span><span class="si">}</span><span class="s2"> noncontinuous variables"</span>
        <span class="p">)</span>
        <span class="n">augmented_start</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">default_start_noncont_vars</span>

        <span class="c1"># Set starts</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">augmented_start</span><span class="p">)</span>
        <span class="n">dv</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"double[]"</span><span class="p">,</span> <span class="p">[</span><span class="n">augmented_start</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)])</span>
        <span class="n">keep_alive_str</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"char[]"</span><span class="p">,</span> <span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">augmented_start</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="n">var_names</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"char *[]"</span><span class="p">,</span> <span class="n">keep_alive_str</span><span class="p">)</span>
        <span class="n">mdl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setMIPStart</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">var_names</span><span class="p">,</span> <span class="n">dv</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.num_cols"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.num_cols">[docs]</a>    <span class="k">def</span> <span class="nf">num_cols</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getNumCols</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.num_int"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.num_int">[docs]</a>    <span class="k">def</span> <span class="nf">num_int</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getNumIntegers</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.num_rows"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.num_rows">[docs]</a>    <span class="k">def</span> <span class="nf">num_rows</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getNumRows</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.num_nz"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.num_nz">[docs]</a>    <span class="k">def</span> <span class="nf">num_nz</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getNumElements</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.get_cutoff"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_cutoff">[docs]</a>    <span class="k">def</span> <span class="nf">get_cutoff</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getCutoff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.set_cutoff"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.set_cutoff">[docs]</a>    <span class="k">def</span> <span class="nf">set_cutoff</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setCutoff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.get_mip_gap_abs"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_mip_gap_abs">[docs]</a>    <span class="k">def</span> <span class="nf">get_mip_gap_abs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getAllowableGap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.set_mip_gap_abs"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.set_mip_gap_abs">[docs]</a>    <span class="k">def</span> <span class="nf">set_mip_gap_abs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">allowable_gap</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setAllowableGap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">allowable_gap</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.get_mip_gap"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_mip_gap">[docs]</a>    <span class="k">def</span> <span class="nf">get_mip_gap</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getAllowableFractionGap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.set_mip_gap"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.set_mip_gap">[docs]</a>    <span class="k">def</span> <span class="nf">set_mip_gap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">allowable_ratio_gap</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setAllowableFractionGap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">allowable_ratio_gap</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.constr_get_expr"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.constr_get_expr">[docs]</a>    <span class="k">def</span> <span class="nf">constr_get_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constr</span><span class="p">:</span> <span class="n">Constr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinExpr</span><span class="p">:</span>
        <span class="n">numnz</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getRowNz</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">constr</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>

        <span class="n">ridx</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getRowIndices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">constr</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ridx</span> <span class="o">==</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ParameterNotAvailable</span><span class="p">(</span><span class="s2">"Error getting row indices."</span><span class="p">)</span>
        <span class="n">rcoef</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getRowCoeffs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">constr</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rcoef</span> <span class="o">==</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ParameterNotAvailable</span><span class="p">(</span><span class="s2">"Error getting row coefficients."</span><span class="p">)</span>

        <span class="n">rhs</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getRowRHS</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">constr</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>
        <span class="n">rsense</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getRowSense</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">constr</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="n">sense</span> <span class="o">=</span> <span class="s2">""</span>
        <span class="k">if</span> <span class="n">rsense</span> <span class="o">==</span> <span class="s2">"E"</span><span class="p">:</span>
            <span class="n">sense</span> <span class="o">=</span> <span class="n">EQUAL</span>
        <span class="k">elif</span> <span class="n">rsense</span> <span class="o">==</span> <span class="s2">"L"</span><span class="p">:</span>
            <span class="n">sense</span> <span class="o">=</span> <span class="n">LESS_OR_EQUAL</span>
        <span class="k">elif</span> <span class="n">rsense</span> <span class="o">==</span> <span class="s2">"G"</span><span class="p">:</span>
            <span class="n">sense</span> <span class="o">=</span> <span class="n">GREATER_OR_EQUAL</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Unknow sense: </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rsense</span><span class="p">))</span>

        <span class="n">expr</span> <span class="o">=</span> <span class="n">LinExpr</span><span class="p">(</span><span class="n">const</span><span class="o">=-</span><span class="n">rhs</span><span class="p">,</span> <span class="n">sense</span><span class="o">=</span><span class="n">sense</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numnz</span><span class="p">):</span>
            <span class="n">expr</span><span class="o">.</span><span class="n">add_var</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="n">ridx</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">rcoef</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">expr</span></div>

<div class="viewcode-block" id="SolverCbc.constr_get_name"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.constr_get_name">[docs]</a>    <span class="k">def</span> <span class="nf">constr_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">namep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__name_space</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getRowName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">namep</span><span class="p">,</span> <span class="n">MAX_NAME_SIZE</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ffi</span><span class="o">.</span><span class="n">string</span><span class="p">(</span><span class="n">namep</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.set_processing_limits"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.set_processing_limits">[docs]</a>    <span class="k">def</span> <span class="nf">set_processing_limits</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s2">"Solver"</span><span class="p">,</span>
        <span class="n">max_time</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span> <span class="o">=</span> <span class="n">mip</span><span class="o">.</span><span class="n">INF</span><span class="p">,</span>
        <span class="n">max_nodes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">mip</span><span class="o">.</span><span class="n">INT_MAX</span><span class="p">,</span>
        <span class="n">max_sol</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">mip</span><span class="o">.</span><span class="n">INT_MAX</span><span class="p">,</span>
        <span class="n">max_seconds_same_incumbent</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">mip</span><span class="o">.</span><span class="n">INT_MAX</span><span class="p">,</span>
        <span class="n">max_nodes_same_incumbent</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">mip</span><span class="o">.</span><span class="n">INF</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="n">pmodel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>

        <span class="sd">"""processing limits should be set even when they INF, since</span>
<span class="sd">        smaller limits could have been set in a previous iteration"""</span>

        <span class="k">if</span> <span class="n">max_time</span> <span class="o">!=</span> <span class="n">mip</span><span class="o">.</span><span class="n">INF</span><span class="p">:</span>
            <span class="n">cbc_set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">"timeMode"</span><span class="p">,</span> <span class="s2">"elapsed"</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_max_seconds</span><span class="p">(</span><span class="n">max_time</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">max_nodes</span> <span class="o">!=</span> <span class="n">mip</span><span class="o">.</span><span class="n">INT_MAX</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_max_nodes</span><span class="p">(</span><span class="n">max_nodes</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">max_sol</span> <span class="o">!=</span> <span class="n">mip</span><span class="o">.</span><span class="n">INT_MAX</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_max_solutions</span><span class="p">(</span><span class="n">max_sol</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">max_seconds_same_incumbent</span> <span class="o">!=</span> <span class="n">mip</span><span class="o">.</span><span class="n">INF</span><span class="p">:</span>
            <span class="n">Cbc_setDblParam</span><span class="p">(</span>
                <span class="n">pmodel</span><span class="p">,</span> <span class="n">DBL_PARAM_MAX_SECS_NOT_IMPROV_FS</span><span class="p">,</span> <span class="n">max_seconds_same_incumbent</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">max_nodes_same_incumbent</span> <span class="o">!=</span> <span class="n">mip</span><span class="o">.</span><span class="n">INT_MAX</span><span class="p">:</span>
            <span class="n">Cbc_setIntParam</span><span class="p">(</span>
                <span class="n">pmodel</span><span class="p">,</span> <span class="n">INT_PARAM_MAX_NODES_NOT_IMPROV_FS</span><span class="p">,</span> <span class="n">max_nodes_same_incumbent</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.get_emphasis"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_emphasis">[docs]</a>    <span class="k">def</span> <span class="nf">get_emphasis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SearchEmphasis</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">emphasis</span></div>

<div class="viewcode-block" id="SolverCbc.set_emphasis"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.set_emphasis">[docs]</a>    <span class="k">def</span> <span class="nf">set_emphasis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emph</span><span class="p">:</span> <span class="n">SearchEmphasis</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emphasis</span> <span class="o">=</span> <span class="n">emph</span></div>

<div class="viewcode-block" id="SolverCbc.set_num_threads"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.set_num_threads">[docs]</a>    <span class="k">def</span> <span class="nf">set_num_threads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threads</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__threads</span> <span class="o">=</span> <span class="n">threads</span></div>

<div class="viewcode-block" id="SolverCbc.remove_constrs"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.remove_constrs">[docs]</a>    <span class="k">def</span> <span class="nf">remove_constrs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constrs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"int[]"</span><span class="p">,</span> <span class="n">constrs</span><span class="p">)</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_deleteRows</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">constrs</span><span class="p">),</span> <span class="n">idx</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.remove_vars"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.remove_vars">[docs]</a>    <span class="k">def</span> <span class="nf">remove_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">varsList</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"int[]"</span><span class="p">,</span> <span class="n">varsList</span><span class="p">)</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_deleteCols</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">varsList</span><span class="p">),</span> <span class="n">idx</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_deleteModel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span>

<div class="viewcode-block" id="SolverCbc.get_problem_name"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_problem_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_problem_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">namep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__name_space</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_problemName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">MAX_NAME_SIZE</span><span class="p">,</span> <span class="n">namep</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ffi</span><span class="o">.</span><span class="n">string</span><span class="p">(</span><span class="n">namep</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverCbc.set_problem_name"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.set_problem_name">[docs]</a>    <span class="k">def</span> <span class="nf">set_problem_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_setProblemName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">name</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">))</span></div>

<div class="viewcode-block" id="SolverCbc.get_pump_passes"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.get_pump_passes">[docs]</a>    <span class="k">def</span> <span class="nf">get_pump_passes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__pumpp</span></div>

<div class="viewcode-block" id="SolverCbc.set_pump_passes"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.set_pump_passes">[docs]</a>    <span class="k">def</span> <span class="nf">set_pump_passes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">passes</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__pumpp</span> <span class="o">=</span> <span class="n">passes</span></div>

<div class="viewcode-block" id="SolverCbc.constr_get_pi"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.constr_get_pi">[docs]</a>    <span class="k">def</span> <span class="nf">constr_get_pi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constr</span><span class="p">:</span> <span class="n">Constr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__pi</span><span class="p">[</span><span class="n">constr</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span></div>

<div class="viewcode-block" id="SolverCbc.constr_get_slack"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.constr_get_slack">[docs]</a>    <span class="k">def</span> <span class="nf">constr_get_slack</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constr</span><span class="p">:</span> <span class="n">Constr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__slack</span><span class="p">[</span><span class="n">constr</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span></div>

<div class="viewcode-block" id="SolverCbc.feature_values"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.feature_values">[docs]</a>    <span class="k">def</span> <span class="nf">feature_values</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">Cbc_nFeatures</span><span class="p">())</span>
        <span class="n">fv</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"double[</span><span class="si">%d</span><span class="s2">]"</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>
        <span class="n">Cbc_computeFeatures</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">,</span> <span class="n">fv</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">fv</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span></div>

<div class="viewcode-block" id="SolverCbc.reset"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverCbc.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__x</span> <span class="o">=</span> <span class="n">EmptyVarSol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rc</span> <span class="o">=</span> <span class="n">EmptyVarSol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__pi</span> <span class="o">=</span> <span class="n">EmptyRowSol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__obj_val</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">Cbc_reset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="feature_names"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.feature_names">[docs]</a><span class="k">def</span> <span class="nf">feature_names</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">Cbc_nFeatures</span><span class="p">())</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">ffi</span><span class="o">.</span><span class="n">string</span><span class="p">(</span><span class="n">Cbc_featureName</span><span class="p">(</span><span class="n">i</span><span class="p">))</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span></div>


<div class="viewcode-block" id="ModelOsi"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.ModelOsi">[docs]</a><span class="k">class</span> <span class="nc">ModelOsi</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">osi_ptr</span><span class="p">):</span>
        <span class="c1"># initializing variables with default values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">solver_name</span> <span class="o">=</span> <span class="s2">"osi"</span>
        <span class="n">existing_solver</span> <span class="o">=</span> <span class="n">osi_ptr</span> <span class="o">!=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">solver</span> <span class="o">=</span> <span class="n">SolverOsi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">osi_ptr</span><span class="p">)</span>

        <span class="c1"># list of constraints and variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">constrs</span> <span class="o">=</span> <span class="n">VConstrList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">VVarList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># if a fractional solution is being processed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fractional</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">existing_solver</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">get_status</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="o">=</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">LOADED</span>

        <span class="c1"># initializing additional control variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__cuts</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__cut_passes</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__clique</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__preprocess</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__constrs_generator</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__lazy_constrs_generator</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__start</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__threads</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__n_cols</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__n_rows</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__gap</span> <span class="o">=</span> <span class="n">INF</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__store_search_progress_log</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="ModelOsi.add_constr"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.ModelOsi.add_constr">[docs]</a>    <span class="k">def</span> <span class="nf">add_constr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lin_expr</span><span class="p">:</span> <span class="n">LinExpr</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">""</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">"Constr"</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fractional</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_cut</span><span class="p">(</span><span class="n">lin_expr</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_lazy_constr</span><span class="p">(</span><span class="n">lin_expr</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span></div></div>


<div class="viewcode-block" id="SolverOsi"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi">[docs]</a><span class="k">class</span> <span class="nc">SolverOsi</span><span class="p">(</span><span class="n">Solver</span><span class="p">):</span>
    <span class="sd">"""Interface for the OsiSolverInterface, the generic solver interface of</span>
<span class="sd">    COIN-OR. This solver has a restricted functionality (comparing to</span>
<span class="sd">    SolverCbc) and it is used mainly in callbacks where only the pre-processed</span>
<span class="sd">    model is available"""</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">Model</span><span class="p">,</span> <span class="n">osi_ptr</span><span class="o">=</span><span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_objconst</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="c1"># pre-allocate temporary space to query names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__name_space</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"char[</span><span class="si">{}</span><span class="s2">]"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">MAX_NAME_SIZE</span><span class="p">))</span>
        <span class="c1"># in cut generation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__name_spacec</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"char[</span><span class="si">{}</span><span class="s2">]"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">MAX_NAME_SIZE</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">osi_ptr</span> <span class="o">!=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">osi</span> <span class="o">=</span> <span class="n">osi_ptr</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">owns_solver</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">owns_solver</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">osi</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_newSolver</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__relaxed</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># name indexes, created if necessary</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colNames</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rowNames</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objconst</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">osi_cutsp</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__x</span> <span class="o">=</span> <span class="n">EmptyVarSol</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rc</span> <span class="o">=</span> <span class="n">EmptyVarSol</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__pi</span> <span class="o">=</span> <span class="n">EmptyRowSol</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__obj_val</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_isProvenOptimal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__x</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getColSolution</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__rc</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getReducedCost</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__pi</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getRowPrice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__obj_val</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getObjValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__clear_sol</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s2">"SolverOsi"</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__x</span> <span class="o">=</span> <span class="n">EmptyVarSol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rc</span> <span class="o">=</span> <span class="n">EmptyVarSol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__pi</span> <span class="o">=</span> <span class="n">EmptyRowSol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__obj_val</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">owns_solver</span><span class="p">:</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_deleteSolver</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>

<div class="viewcode-block" id="SolverOsi.add_var"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.add_var">[docs]</a>    <span class="k">def</span> <span class="nf">add_var</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span>
        <span class="n">obj</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">lb</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">ub</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span> <span class="o">=</span> <span class="n">INF</span><span class="p">,</span>
        <span class="n">var_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">CONTINUOUS</span><span class="p">,</span>
        <span class="n">column</span><span class="p">:</span> <span class="s2">"Column"</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="c1"># collecting column data</span>
        <span class="k">if</span> <span class="n">column</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">vind</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span>
            <span class="n">vval</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span>
            <span class="n">numnz</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vind</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"int[]"</span><span class="p">,</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">idx</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">column</span><span class="o">.</span><span class="n">constrs</span><span class="p">])</span>
            <span class="n">vval</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"double[]"</span><span class="p">,</span> <span class="p">[</span><span class="n">coef</span> <span class="k">for</span> <span class="n">coef</span> <span class="ow">in</span> <span class="n">column</span><span class="o">.</span><span class="n">coeffs</span><span class="p">])</span>
            <span class="n">numnz</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">constrs</span><span class="p">)</span>

        <span class="n">isInt</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">CHAR_ONE</span>
            <span class="k">if</span> <span class="n">var_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">"B"</span> <span class="ow">or</span> <span class="n">var_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">"I"</span>
            <span class="k">else</span> <span class="n">CHAR_ZERO</span>
        <span class="p">)</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_addCol</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span>
            <span class="n">name</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">),</span>
            <span class="n">lb</span><span class="p">,</span>
            <span class="n">ub</span><span class="p">,</span>
            <span class="n">obj</span><span class="p">,</span>
            <span class="n">isInt</span><span class="p">,</span>
            <span class="n">numnz</span><span class="p">,</span>
            <span class="n">vind</span><span class="p">,</span>
            <span class="n">vval</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.add_constr"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.add_constr">[docs]</a>    <span class="k">def</span> <span class="nf">add_constr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lin_expr</span><span class="p">:</span> <span class="s2">"LinExpr"</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">""</span><span class="p">):</span>
        <span class="c1"># collecting linear expression data</span>
        <span class="n">numnz</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">lin_expr</span><span class="o">.</span><span class="n">expr</span><span class="p">)</span>

        <span class="n">cind</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"int[]"</span><span class="p">,</span> <span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">idx</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">keys</span><span class="p">()])</span>
        <span class="n">cval</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"double[]"</span><span class="p">,</span> <span class="p">[</span><span class="n">coef</span> <span class="k">for</span> <span class="n">coef</span> <span class="ow">in</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>

        <span class="c1"># constraint sense and rhs</span>
        <span class="n">sense</span> <span class="o">=</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">sense</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="o">-</span><span class="n">lin_expr</span><span class="o">.</span><span class="n">const</span>

        <span class="n">namestr</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span>
        <span class="n">mp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">osi</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_addRow</span><span class="p">(</span><span class="n">mp</span><span class="p">,</span> <span class="n">namestr</span><span class="p">,</span> <span class="n">numnz</span><span class="p">,</span> <span class="n">cind</span><span class="p">,</span> <span class="n">cval</span><span class="p">,</span> <span class="n">sense</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.add_cut"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.add_cut">[docs]</a>    <span class="k">def</span> <span class="nf">add_cut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lin_expr</span><span class="p">:</span> <span class="n">LinExpr</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">osi_cutsp</span> <span class="o">!=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">violation</span> <span class="o">&lt;</span> <span class="mf">1e-5</span><span class="p">:</span>
                <span class="k">return</span>

            <span class="n">numnz</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">lin_expr</span><span class="o">.</span><span class="n">expr</span><span class="p">)</span>

            <span class="n">cind</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"int[]"</span><span class="p">,</span> <span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">idx</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">keys</span><span class="p">()])</span>
            <span class="n">cval</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"double[]"</span><span class="p">,</span> <span class="p">[</span><span class="n">coef</span> <span class="k">for</span> <span class="n">coef</span> <span class="ow">in</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>

            <span class="c1"># constraint sense and rhs</span>
            <span class="n">sense</span> <span class="o">=</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">sense</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span>
            <span class="n">rhs</span> <span class="o">=</span> <span class="o">-</span><span class="n">lin_expr</span><span class="o">.</span><span class="n">const</span>

            <span class="n">OsiCuts_addGlobalRowCut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi_cutsp</span><span class="p">,</span> <span class="n">numnz</span><span class="p">,</span> <span class="n">cind</span><span class="p">,</span> <span class="n">cval</span><span class="p">,</span> <span class="n">sense</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">global</span> <span class="n">cut_idx</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">"cut</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cut_idx</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_constr</span><span class="p">(</span><span class="n">lin_expr</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.add_lazy_constr"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.add_lazy_constr">[docs]</a>    <span class="k">def</span> <span class="nf">add_lazy_constr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lin_expr</span><span class="p">:</span> <span class="n">LinExpr</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">osi_cutsp</span> <span class="o">!=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">:</span>
            <span class="c1"># checking if violated</span>
            <span class="c1"># if lin_expr.violation &lt; 1e-5:</span>
            <span class="c1">#     return</span>

            <span class="n">numnz</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">lin_expr</span><span class="o">.</span><span class="n">expr</span><span class="p">)</span>

            <span class="n">cind</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"int[]"</span><span class="p">,</span> <span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">idx</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">keys</span><span class="p">()])</span>
            <span class="n">cval</span> <span class="o">=</span> <span class="n">ffi</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">"double[]"</span><span class="p">,</span> <span class="p">[</span><span class="n">coef</span> <span class="k">for</span> <span class="n">coef</span> <span class="ow">in</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>

            <span class="c1"># constraint sense and rhs</span>
            <span class="n">sense</span> <span class="o">=</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">sense</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span>
            <span class="n">rhs</span> <span class="o">=</span> <span class="o">-</span><span class="n">lin_expr</span><span class="o">.</span><span class="n">const</span>

            <span class="n">OsiCuts_addGlobalRowCut</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi_cutsp</span><span class="p">,</span> <span class="n">numnz</span><span class="p">,</span> <span class="n">cind</span><span class="p">,</span> <span class="n">cval</span><span class="p">,</span> <span class="n">sense</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">global</span> <span class="n">cut_idx</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">"cut</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cut_idx</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_constr</span><span class="p">(</span><span class="n">lin_expr</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.get_objective_bound"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_objective_bound">[docs]</a>    <span class="k">def</span> <span class="nf">get_objective_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.get_objective"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_objective">[docs]</a>    <span class="k">def</span> <span class="nf">get_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinExpr</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getObjCoefficients</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="o">==</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ParameterNotAvailable</span><span class="p">(</span><span class="s2">"Error getting objective function coefficients"</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">xsum</span><span class="p">(</span>
                <span class="n">obj</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_cols</span><span class="p">())</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mf">1e-15</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objconst</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.get_objective_const"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_objective_const">[docs]</a>    <span class="k">def</span> <span class="nf">get_objective_const</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objconst</span></div>

<div class="viewcode-block" id="SolverOsi.relax"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.relax">[docs]</a>    <span class="k">def</span> <span class="nf">relax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__relaxed</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="SolverOsi.optimize"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.optimize">[docs]</a>    <span class="k">def</span> <span class="nf">optimize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OptimizationStatus</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__relaxed</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_int</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># linear optimization</span>
            <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_isProvenOptimal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">):</span>
                <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_resolve</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_initialSolve</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_branchAndBound</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_isProvenOptimal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__x</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getColSolution</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__rc</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getReducedCost</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__pi</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getRowPrice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__obj_val</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getObjValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_status</span><span class="p">()</span></div>

<div class="viewcode-block" id="SolverOsi.get_status"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_status">[docs]</a>    <span class="k">def</span> <span class="nf">get_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OptimizationStatus</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_isProvenOptimal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">OPTIMAL</span>

        <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_isProvenPrimalInfeasible</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">osi</span>
        <span class="p">)</span> <span class="ow">or</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_isProvenDualInfeasible</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">INFEASIBLE</span>
        <span class="k">elif</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_isAbandoned</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">ERROR</span>
        <span class="k">return</span> <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">LOADED</span></div>

<div class="viewcode-block" id="SolverOsi.get_objective_value"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_objective_value">[docs]</a>    <span class="k">def</span> <span class="nf">get_objective_value</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__obj_val</span></div>

<div class="viewcode-block" id="SolverOsi.get_log"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_log">[docs]</a>    <span class="k">def</span> <span class="nf">get_log</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">]]]:</span>
        <span class="k">return</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="SolverOsi.get_objective_value_i"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_objective_value_i">[docs]</a>    <span class="k">def</span> <span class="nf">get_objective_value_i</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.get_num_solutions"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_num_solutions">[docs]</a>    <span class="k">def</span> <span class="nf">get_num_solutions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_isProvenOptimal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="SolverOsi.get_objective_sense"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_objective_sense">[docs]</a>    <span class="k">def</span> <span class="nf">get_objective_sense</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">objs</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getObjSense</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">objs</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">MAXIMIZE</span>

        <span class="k">return</span> <span class="n">MINIMIZE</span></div>

<div class="viewcode-block" id="SolverOsi.set_objective_sense"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.set_objective_sense">[docs]</a>    <span class="k">def</span> <span class="nf">set_objective_sense</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sense</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sense</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="n">MAXIMIZE</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">():</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_setObjSense</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">sense</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="n">MINIMIZE</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">():</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_setObjSense</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">"Unknown sense: </span><span class="si">{}</span><span class="s2">, use </span><span class="si">{}</span><span class="s2"> or </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sense</span><span class="p">,</span> <span class="n">MAXIMIZE</span><span class="p">,</span> <span class="n">MINIMIZE</span><span class="p">)</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.set_start"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.set_start">[docs]</a>    <span class="k">def</span> <span class="nf">set_start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="s2">"Var"</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">]]):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"MIPstart not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.set_objective"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.set_objective">[docs]</a>    <span class="k">def</span> <span class="nf">set_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lin_expr</span><span class="p">:</span> <span class="s2">"LinExpr"</span><span class="p">,</span> <span class="n">sense</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">""</span><span class="p">):</span>
        <span class="c1"># collecting variable coefficients</span>
        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coeff</span> <span class="ow">in</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_setObjCoeff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">,</span> <span class="n">coeff</span><span class="p">)</span>

        <span class="c1"># objective function constant</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_objconst</span> <span class="o">=</span> <span class="n">lin_expr</span><span class="o">.</span><span class="n">const</span>

        <span class="c1"># setting objective sense</span>
        <span class="k">if</span> <span class="n">sense</span> <span class="o">==</span> <span class="n">MAXIMIZE</span><span class="p">:</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_setObjSense</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">sense</span> <span class="o">==</span> <span class="n">MINIMIZE</span><span class="p">:</span>
            <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_setObjSense</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.set_objective_const"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.set_objective_const">[docs]</a>    <span class="k">def</span> <span class="nf">set_objective_const</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">const</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Still not implemented in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.set_processing_limits"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.set_processing_limits">[docs]</a>    <span class="k">def</span> <span class="nf">set_processing_limits</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">max_time</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span> <span class="o">=</span> <span class="n">INF</span><span class="p">,</span>
        <span class="n">max_nodes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">maxsize</span><span class="p">,</span>
        <span class="n">max_sol</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">maxsize</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.get_max_seconds"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_max_seconds">[docs]</a>    <span class="k">def</span> <span class="nf">get_max_seconds</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.set_max_seconds"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.set_max_seconds">[docs]</a>    <span class="k">def</span> <span class="nf">set_max_seconds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_seconds</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.get_max_solutions"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_max_solutions">[docs]</a>    <span class="k">def</span> <span class="nf">get_max_solutions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.set_max_solutions"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.set_max_solutions">[docs]</a>    <span class="k">def</span> <span class="nf">set_max_solutions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_solutions</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.get_pump_passes"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_pump_passes">[docs]</a>    <span class="k">def</span> <span class="nf">get_pump_passes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.set_pump_passes"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.set_pump_passes">[docs]</a>    <span class="k">def</span> <span class="nf">set_pump_passes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">passes</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.get_max_nodes"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_max_nodes">[docs]</a>    <span class="k">def</span> <span class="nf">get_max_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.set_max_nodes"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.set_max_nodes">[docs]</a>    <span class="k">def</span> <span class="nf">set_max_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_nodes</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.set_num_threads"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.set_num_threads">[docs]</a>    <span class="k">def</span> <span class="nf">set_num_threads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threads</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.write"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.read"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.read">[docs]</a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.num_cols"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.num_cols">[docs]</a>    <span class="k">def</span> <span class="nf">num_cols</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getNumCols</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.num_rows"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.num_rows">[docs]</a>    <span class="k">def</span> <span class="nf">num_rows</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getNumRows</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.num_nz"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.num_nz">[docs]</a>    <span class="k">def</span> <span class="nf">num_nz</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getNumElements</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.num_int"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.num_int">[docs]</a>    <span class="k">def</span> <span class="nf">num_int</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getNumIntegers</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.get_emphasis"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_emphasis">[docs]</a>    <span class="k">def</span> <span class="nf">get_emphasis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SearchEmphasis</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.set_emphasis"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.set_emphasis">[docs]</a>    <span class="k">def</span> <span class="nf">set_emphasis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">emph</span><span class="p">:</span> <span class="n">SearchEmphasis</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.get_cutoff"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_cutoff">[docs]</a>    <span class="k">def</span> <span class="nf">get_cutoff</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.set_cutoff"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.set_cutoff">[docs]</a>    <span class="k">def</span> <span class="nf">set_cutoff</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.get_mip_gap_abs"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_mip_gap_abs">[docs]</a>    <span class="k">def</span> <span class="nf">get_mip_gap_abs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.set_mip_gap_abs"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.set_mip_gap_abs">[docs]</a>    <span class="k">def</span> <span class="nf">set_mip_gap_abs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mip_gap_abs</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.get_mip_gap"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_mip_gap">[docs]</a>    <span class="k">def</span> <span class="nf">get_mip_gap</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.set_mip_gap"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.set_mip_gap">[docs]</a>    <span class="k">def</span> <span class="nf">set_mip_gap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mip_gap</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.get_verbose"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_verbose">[docs]</a>    <span class="k">def</span> <span class="nf">get_verbose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.set_verbose"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.set_verbose">[docs]</a>    <span class="k">def</span> <span class="nf">set_verbose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbose</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

    <span class="c1"># Constraint-related getters/setters</span>
<div class="viewcode-block" id="SolverOsi.constr_get_expr"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.constr_get_expr">[docs]</a>    <span class="k">def</span> <span class="nf">constr_get_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constr</span><span class="p">:</span> <span class="n">Constr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinExpr</span><span class="p">:</span>
        <span class="n">numnz</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getRowNz</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">constr</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>

        <span class="n">ridx</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getRowIndices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">constr</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ridx</span> <span class="o">==</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ParameterNotAvailable</span><span class="p">(</span><span class="s2">"Error getting row indices."</span><span class="p">)</span>
        <span class="n">rcoef</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getRowCoeffs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">constr</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rcoef</span> <span class="o">==</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ParameterNotAvailable</span><span class="p">(</span><span class="s2">"Error getting row coefficients."</span><span class="p">)</span>

        <span class="n">rhs</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getRowRHS</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">constr</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>
        <span class="n">rsense</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getRowSense</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">constr</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="n">sense</span> <span class="o">=</span> <span class="s2">""</span>
        <span class="k">if</span> <span class="n">rsense</span> <span class="o">==</span> <span class="s2">"E"</span><span class="p">:</span>
            <span class="n">sense</span> <span class="o">=</span> <span class="n">EQUAL</span>
        <span class="k">elif</span> <span class="n">rsense</span> <span class="o">==</span> <span class="s2">"L"</span><span class="p">:</span>
            <span class="n">sense</span> <span class="o">=</span> <span class="n">LESS_OR_EQUAL</span>
        <span class="k">elif</span> <span class="n">rsense</span> <span class="o">==</span> <span class="s2">"G"</span><span class="p">:</span>
            <span class="n">sense</span> <span class="o">=</span> <span class="n">GREATER_OR_EQUAL</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Unknow sense: </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rsense</span><span class="p">))</span>

        <span class="n">expr</span> <span class="o">=</span> <span class="n">LinExpr</span><span class="p">(</span><span class="n">const</span><span class="o">=-</span><span class="n">rhs</span><span class="p">,</span> <span class="n">sense</span><span class="o">=</span><span class="n">sense</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numnz</span><span class="p">):</span>
            <span class="n">expr</span><span class="o">.</span><span class="n">add_var</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="n">ridx</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">rcoef</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">expr</span></div>

<div class="viewcode-block" id="SolverOsi.constr_set_expr"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.constr_set_expr">[docs]</a>    <span class="k">def</span> <span class="nf">constr_set_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constr</span><span class="p">:</span> <span class="n">Constr</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">LinExpr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinExpr</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.constr_get_name"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.constr_get_name">[docs]</a>    <span class="k">def</span> <span class="nf">constr_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">namep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__name_space</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getRowName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">namep</span><span class="p">,</span> <span class="n">MAX_NAME_SIZE</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ffi</span><span class="o">.</span><span class="n">string</span><span class="p">(</span><span class="n">namep</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.remove_constrs"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.remove_constrs">[docs]</a>    <span class="k">def</span> <span class="nf">remove_constrs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constrsList</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.constr_get_index"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.constr_get_index">[docs]</a>    <span class="k">def</span> <span class="nf">constr_get_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rowNames</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rowNames</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_rows</span><span class="p">()):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rowNames</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">constr_get_name</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span> <span class="o">=</span> <span class="n">i</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rowNames</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rowNames</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span></div>

<div class="viewcode-block" id="SolverOsi.constr_get_pi"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.constr_get_pi">[docs]</a>    <span class="k">def</span> <span class="nf">constr_get_pi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constr</span><span class="p">:</span> <span class="n">Constr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__pi</span><span class="p">[</span><span class="n">constr</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span></div>

<div class="viewcode-block" id="SolverOsi.constr_get_slack"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.constr_get_slack">[docs]</a>    <span class="k">def</span> <span class="nf">constr_get_slack</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constr</span><span class="p">:</span> <span class="n">Constr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">status</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">OPTIMAL</span><span class="p">,</span>
            <span class="n">OptimizationStatus</span><span class="o">.</span><span class="n">FEASIBLE</span><span class="p">,</span>
        <span class="p">]:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">pac</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getRowActivity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pac</span> <span class="o">==</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getRowRHS</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">constr</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>
        <span class="n">activity</span> <span class="o">=</span> <span class="n">pac</span><span class="p">[</span><span class="n">constr</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span>

        <span class="n">sense</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getRowSense</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">constr</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">sense</span> <span class="ow">in</span> <span class="s2">"&lt;L"</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">rhs</span> <span class="o">-</span> <span class="n">activity</span>
        <span class="k">if</span> <span class="n">sense</span> <span class="ow">in</span> <span class="s2">"&gt;G"</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">activity</span> <span class="o">-</span> <span class="n">rhs</span>
        <span class="k">if</span> <span class="n">sense</span> <span class="ow">in</span> <span class="s2">"=E"</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">activity</span> <span class="o">-</span> <span class="n">rhs</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span></div>

    <span class="c1"># Variable-related getters/setters</span>

<div class="viewcode-block" id="SolverOsi.var_get_branch_priority"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.var_get_branch_priority">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_branch_priority</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>  <span class="c1"># todo: modify branch priority in CBC</span></div>

<div class="viewcode-block" id="SolverOsi.var_set_branch_priority"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.var_set_branch_priority">[docs]</a>    <span class="k">def</span> <span class="nf">var_set_branch_priority</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ParameterNotAvailable</span><span class="p">(</span>
            <span class="s2">"Attribute branch_priority cannot be modified in CBC at the moment"</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.var_get_lb"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.var_get_lb">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_lb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getColLower</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span></div>

<div class="viewcode-block" id="SolverOsi.var_set_lb"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.var_set_lb">[docs]</a>    <span class="k">def</span> <span class="nf">var_set_lb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_setColLower</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.var_get_ub"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.var_get_ub">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_ub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getColUpper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span></div>

<div class="viewcode-block" id="SolverOsi.var_set_ub"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.var_set_ub">[docs]</a>    <span class="k">def</span> <span class="nf">var_set_ub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_setColUpper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.var_get_obj"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.var_get_obj">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getObjCoefficients</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="o">==</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ParameterNotAvailable</span><span class="p">(</span><span class="s2">"Error getting objective function coefficients"</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obj</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span></div>

<div class="viewcode-block" id="SolverOsi.var_set_obj"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.var_set_obj">[docs]</a>    <span class="k">def</span> <span class="nf">var_set_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_setObjCoef</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.var_get_var_type"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.var_get_var_type">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_var_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">isInt</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_isInteger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">isInt</span><span class="p">:</span>
            <span class="n">lb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_get_lb</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
            <span class="n">ub</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_get_ub</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">lb</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">1e-15</span> <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ub</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">1e-15</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">BINARY</span>

            <span class="k">return</span> <span class="n">INTEGER</span>

        <span class="k">return</span> <span class="n">CONTINUOUS</span></div>

<div class="viewcode-block" id="SolverOsi.var_set_var_type"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.var_set_var_type">[docs]</a>    <span class="k">def</span> <span class="nf">var_set_var_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">cv</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">var_type</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">cv</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">cv</span> <span class="o">==</span> <span class="n">CONTINUOUS</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">(</span><span class="n">INTEGER</span><span class="p">,</span> <span class="n">BINARY</span><span class="p">):</span>
                <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_setInteger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">CONTINUOUS</span><span class="p">:</span>
                <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_setContinuous</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="n">BINARY</span><span class="p">:</span>
            <span class="c1"># checking bounds</span>
            <span class="k">if</span> <span class="n">var</span><span class="o">.</span><span class="n">lb</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                <span class="n">var</span><span class="o">.</span><span class="n">lb</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="k">if</span> <span class="n">var</span><span class="o">.</span><span class="n">ub</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
                <span class="n">var</span><span class="o">.</span><span class="n">ub</span> <span class="o">=</span> <span class="mf">1.0</span></div>

<div class="viewcode-block" id="SolverOsi.var_get_column"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.var_get_column">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_column</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Column</span><span class="p">:</span>
        <span class="n">numnz</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getColNz</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>

        <span class="n">cidx</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getColIndices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cidx</span> <span class="o">==</span> <span class="n">ffi</span><span class="o">.</span><span class="n">NULL</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ParameterNotAvailable</span><span class="p">(</span><span class="s2">"Error getting column indices'"</span><span class="p">)</span>
        <span class="n">ccoef</span> <span class="o">=</span> <span class="n">cbclib</span><span class="o">.</span><span class="n">Cbc_getColCoeffs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>

        <span class="n">col</span> <span class="o">=</span> <span class="n">Column</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numnz</span><span class="p">):</span>
            <span class="n">col</span><span class="o">.</span><span class="n">constrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Constr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">cidx</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="n">col</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ccoef</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">col</span></div>

<div class="viewcode-block" id="SolverOsi.var_set_column"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.var_set_column">[docs]</a>    <span class="k">def</span> <span class="nf">var_set_column</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Column</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not available in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.var_get_rc"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.var_get_rc">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_rc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__rc</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span></div>

<div class="viewcode-block" id="SolverOsi.var_get_x"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.var_get_x">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__x</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span></div>

<div class="viewcode-block" id="SolverOsi.var_get_xi"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.var_get_xi">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_xi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="s2">"Var"</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Solution pool not supported in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.var_get_name"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.var_get_name">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">namep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__name_space</span>
        <span class="n">cbclib</span><span class="o">.</span><span class="n">Osi_getColName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">osi</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">namep</span><span class="p">,</span> <span class="n">MAX_NAME_SIZE</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ffi</span><span class="o">.</span><span class="n">string</span><span class="p">(</span><span class="n">namep</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">"utf-8"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.remove_vars"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.remove_vars">[docs]</a>    <span class="k">def</span> <span class="nf">remove_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">varsList</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not supported in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.var_get_index"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.var_get_index">[docs]</a>    <span class="k">def</span> <span class="nf">var_get_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">colNames</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colNames</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_cols</span><span class="p">()):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colNames</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">var_get_name</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span> <span class="o">=</span> <span class="n">i</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">colNames</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">colNames</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span></div>

<div class="viewcode-block" id="SolverOsi.get_problem_name"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.get_problem_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_problem_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not supported in OsiSolver"</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolverOsi.set_problem_name"><a class="viewcode-back" href="../../../autoapi/odtlearn/utils/mip_cbc/index.html#odtlearn.utils.mip_cbc.SolverOsi.set_problem_name">[docs]</a>    <span class="k">def</span> <span class="nf">set_problem_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">"Not supported in OsiSolver"</span><span class="p">)</span></div></div>


<span class="c1"># vim: ts=4 sw=4 et</span>
</pre></div>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/D3M-Research-Group/odtlearn" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/toggleprompt.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>